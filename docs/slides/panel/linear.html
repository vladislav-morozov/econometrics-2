<!DOCTYPE html>
<html lang="en"><head>
<link href="../../themes/favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0de45b8b5f35a93596f1d788d60c4c11.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/sc-sb-title-1.0.0/sc_sb_title.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/grid-no-htext-1.0.0/grid_no_htext.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <meta name="author" content="Vladislav Morozov">
  <title>Advanced Econometrics – Fixed Effect Estimation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-cb5537517b990794adf0c72e32550bcc.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
   

  <!-- This is what works with Quarto and MathJax 3+ -->

  <script>

    MathJax = {

      tex: {

        tags: 'ams',  // should be 'ams', 'none', or 'all'

        macros: {

          vect: ["\\mathbf{#1}", 1],

          mat: ["\\mathbf{#1}", 1], 

  

          bA: "\\boldsymbol{A}",

          bB: "\\boldsymbol{B}",

          bC: "\\boldsymbol{C}",

          bD: "\\boldsymbol{D}",

          bE: "\\boldsymbol{E}",

          bF: "\\boldsymbol{F}",

          bG: "\\boldsymbol{G}",

          bH: "\\boldsymbol{H}",

          bI: "\\boldsymbol{I}",

          bJ: "\\boldsymbol{J}",

          bK: "\\boldsymbol{K}",

          bL: "\\boldsymbol{L}",

          bM: "\\boldsymbol{M}",

          bN: "\\boldsymbol{N}",

          bP: "\\boldsymbol{P}",

          bQ: "\\boldsymbol{Q}",

          bR: "\\boldsymbol{R}",

          bS: "\\boldsymbol{S}",

          bT: "\\boldsymbol{T}",

          bU: "\\boldsymbol{U}",

          bV: "\\boldsymbol{V}",

          bW: "\\boldsymbol{W}",

          bX: "\\boldsymbol{X}",

          bY: "\\boldsymbol{Y}",

          bZ: "\\boldsymbol{Z}",

          ba: "\\boldsymbol{a}",

          bb: "\\boldsymbol{b}",

          bc: "\\boldsymbol{c}",

          bd: "\\boldsymbol{d}",

          be: "\\boldsymbol{e}",

          bg: "\\boldsymbol{g}",

          bh: "\\boldsymbol{h}",

          bi: "\\boldsymbol{\\imath}",

          bm: "\\boldsymbol{m}",

          bp: "\\boldsymbol{p}",

          bq: "\\boldsymbol{q}",

          br: "\\boldsymbol{r}",

          bs: "\\boldsymbol{s}",

          bt: "\\boldsymbol{t}",

          bu: "\\boldsymbol{u}",

          bv: "\\boldsymbol{v}",

          bw: "\\boldsymbol{w}",

          bx: "\\boldsymbol{x}",

          by: "\\boldsymbol{y}",

  

          Acal: "\\mathcal{A}",

          Bcal: "\\mathcal{B}",

          Ccal: "\\mathcal{C}",

          Dcal: "\\mathcal{D}",

          Ecal: "\\mathcal{E}",

          Fcal: "\\mathcal{F}",

          Gcal: "\\mathcal{G}",

          Hcal: "\\mathcal{H}",

          Ical: "\\mathcal{I}",

          Jcal: "\\mathcal{J}",

          Kcal: "\\mathcal{K}",

          Lcal: "\\mathcal{L}",

          Mcal: "\\mathcal{M}",

          Ncal: "\\mathcal{N}",

          Ocal: "\\mathcal{O}",

          Pcal: "\\mathcal{P}",

          Qcal: "\\mathcal{Q}",

          Rcal: "\\mathcal{R}",

          Scal: "\\mathcal{S}",

          Tcal: "\\mathcal{T}",

          Ucal: "\\mathcal{U}",

          Vcal: "\\mathcal{V}",

          Wcal: "\\mathcal{W}",

          Xcal: "\\mathcal{X}",

          Ycal: "\\mathcal{Y}",

          Zcal: "\\mathcal{Z}",

  

          A: "\\mathbb{A}",

          B: "\\mathbb{B}",

          C: "\\mathbb{C}",

          D: "\\mathbb{D}",

          E: "\\mathbb{E}",

          F: "\\mathbb{F}",

          G: "\\mathbb{G}",

          H: "\\mathbb{H}",

          I: "\\mathbb{I}",

          J: "\\mathbb{J}",

          K: "\\mathbb{K}",

          L: "\\mathbb{L}",

          M: "\\mathbb{M}",

          N: "\\mathbb{N}",

          O: "\\mathbb{O}",

          P: "\\mathbb{P}",

          Q: "\\mathbb{Q}",

          R: "\\mathbb{R}",

          S: "\\mathbb{S}",

          T: "\\mathbb{T}",

          U: "\\mathbb{U}",

          V: "\\mathbb{V}",

          W: "\\mathbb{W}",

          X: "\\mathbb{X}",

          Y: "\\mathbb{Y}",

          Z: "\\mathbb{Z}",

  

          bAlpha: "\\boldsymbol{\\Alpha}",

          bBeta: "\\boldsymbol{\\beta}",

          bDelta: "\\boldsymbol{\\delta}",

          bEta: "\\boldsymbol{\\eta}",

          bGamma: "\\boldsymbol{\\Gamma}",

          bLambda: "\\boldsymbol{\\Lambda}",

          bOmega: "\\boldsymbol{\\Omega}",

          bPhi: "\\boldsymbol{\\Phi}",

          bPi: "\\boldsymbol{\\Pi}",

          bPsi: "\\boldsymbol{\\Psi}",

          bSigma: "\\boldsymbol{\\Sigma}",

          bTau: "\\boldsymbol{\\tau}",

          bXi: "\\boldsymbol{\\Xi}",

          bbeta: "\\boldsymbol{\\beta}",

          bdelta: "\\boldsymbol{\\delta}",

          blambda: "\\boldsymbol{\\lambda}",

          bmu: "\\boldsymbol{\\mu}",

          bphi: "\\boldsymbol{\\phi}",

          bpi: "\\boldsymbol{\\pi}",

          bpsi: "\\boldsymbol{\\psi}",

          brho: "\\boldsymbol{\\rho}",

          balpha: "\\boldsymbol{\\alpha}",

          bsigma: "\\boldsymbol{\\sigma}",

          btau: "\\boldsymbol{\\tau}",

          bxi: "\\boldsymbol{\\xi}",

          bEta: "\\boldsymbol{\\eta}",

          bPhi: "\\boldsymbol{\\Phi}",

          bPi: "\\boldsymbol{\\Pi}",

          bPsi: "\\boldsymbol{\\Psi}",

          bXi: "\\boldsymbol{\\Xi}",

          blambda: "\\boldsymbol{\\lambda}",

          bmu: "\\boldsymbol{\\mu}",

          bphi: "\\boldsymbol{\\phi}",

          bpi: "\\boldsymbol{\\pi}",

          bpsi: "\\boldsymbol{\\psi}",

          brho: "\\boldsymbol{\\rho}",

          bsigma: "\\boldsymbol{\\sigma}",

          btheta: "\\boldsymbol{\\theta}",

          bgamma: "\\boldsymbol{\\gamma}",  

          

          curl: ["\\left\\lbrace#1\\right\\rbrace", 1],

          floor: ["\\left\\lfloor#1\\right\\rfloor", 1],

          ceil: ["\\left\\lceil#1\\right\\rceil", 1],

          abs: ["\\left\\lvert#1\\right\\rvert", 1],

          norm: ["\\left\\lVert#1\\right\\rVert", 1],

  

          avar: "\\mathrm{avar}",

          var: "\\mathrm{var}",

          cov: "\\mathrm{cov}",

  

          argmin: "\\operatorname*{arg\\,min}",

          argmax: "\\operatorname*{arg\\,max}",

          argsup: "\\operatorname*{arg\\,sup}",

          arginf: "\\operatorname*{arg\\,inf}",

        }

      }

    };

  </script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#045D5D" data-footer="" class="quarto-title-block center">
  <h1 class="title">Fixed Effect Estimation</h1>
  <p class="subtitle">Beyond Binary Treatments: Fixed Effects Estimators and their Properties</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Vladislav Morozov 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Contents</h2>
<ul>
<li class="fragment"><a href="#/introduction" id="/toc-introduction">Introduction</a></li>
<li class="fragment"><a href="#/fixed-effect-estimation" id="/toc-fixed-effect-estimation">Fixed Effect Estimation</a></li>
<li class="fragment"><a href="#/causal-properties-with-general-treatment" id="/toc-causal-properties-with-general-treatment">Causal Properties with General Treatment</a></li>
<li class="fragment"><a href="#/empirical-application" id="/toc-empirical-application">Empirical Application</a></li>
<li class="fragment"><a href="#/recap-and-conclusions" id="/toc-recap-and-conclusions">Recap and Conclusions</a></li>
</ul>
</nav>
</section>
<section>
<section id="introduction" class="title-slide slide level2 center" data-background="#00100F">
<h2>Introduction</h2>

</section>
<section id="lecture-info" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Lecture Info</h3>

</section>
<section id="learning-outcomes" class="slide level4">
<h4>Learning Outcomes</h4>
<p>This lecture is about handling more general treatments in panel data with linear models</p>
<p><br></p>
<p>By the end, you should be able to</p>
<ul>
<li class="fragment">State</li>
</ul>
</section>
<section id="references" class="slide level4">
<h4>References</h4>
<div>
<p>Textbooks:</p>
<ul>
<li>Chapter 16 in <span class="citation" data-cites="Huntington-Klein2025EffectIntroductionResearch">Huntington-Klein (<a href="#/references-1" role="doc-biblioref" onclick="">2025</a>)</span></li>
<li>Chapter 13, 14-1, 14-4, 14-5 in <span class="citation" data-cites="Wooldridge2020IntroductoryEconometricsModern">Wooldridge (<a href="#/references-1" role="doc-biblioref" onclick="">2020</a>)</span></li>
<li>Chapter 17 in <span class="citation" data-cites="Hansen2022Econometrics">Hansen (<a href="#/references-1" role="doc-biblioref" onclick="">2022</a>)</span> (except dynamic panels and random effects)</li>
</ul>
</div>
</section>

<section id="empirical-motivation" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Empirical Motivation</h3>

</section>
<section id="empirical-question" class="slide level4 scrollable">
<h4>Empirical Question</h4>
<div class="rounded-box">

</div>
</section>

<section id="motivation-and-questions" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Motivation and Questions</h3>

</section>
<section id="reminder-twfe" class="slide level4">
<h4>Reminder: TWFE</h4>
<p>Recall: for difference-in-differences showed that <span class="math display">\[ \small
\widehat{ATT}^{DiD} = \hat{\delta}
\]</span> where <span class="math inline">\(\hat{\delta}\)</span> was the OLS estimator in regression <span id="eq-panel-twfe-did-diff"><span class="math display">\[\small
Y_{i2}- Y_{i1} = \gamma + \delta D_{it} + U_{i2}
\tag{1}\]</span></span> for <span class="math inline">\(\delta\)</span> — the ATT; <span class="math inline">\(\gamma\)</span> — average change in outcomes (trend)</p>
</section>
<section id="reminder-more-general-equation" class="slide level4">
<h4>Reminder: More General Equation</h4>
<p><a href="#/eq-panel-twfe-did-diff" class="quarto-xref">Equation&nbsp;1</a> obtained by differencing the <em>two-way fixed effect</em> equation: <span id="eq-panel-twfe-did-undiff"><span class="math display">\[
Y_{it} = \alpha_i + \gamma_t + \delta D_{it} + U_{it},
\tag{2}\]</span></span> where <span class="math display">\[
\gamma_1 = 0, \quad \gamma_2 = \gamma
\]</span> and <span class="math inline">\(\alpha_i = Y_{i1}^0\)</span> — baseline differences between units</p>
</section>
<section id="reminder-estimation" class="slide level4">
<h4>Reminder: Estimation</h4>
<p><br></p>
<ul>
<li class="fragment">We know how to apply OLS based on <a href="#/eq-panel-twfe-did-diff" class="quarto-xref">Equation&nbsp;1</a>: just regress <span class="math inline">\((Y_{i2}-Y_{i1})\)</span> on <span class="math inline">\((1, D_{it})\)</span> with OLS</li>
<li class="fragment">Last time said that can also apply OLS based on <a href="#/eq-panel-twfe-did-undiff" class="quarto-xref">Equation&nbsp;2</a> directly (e.g.&nbsp;<code>PanelOLS</code> from <code>linearmodels</code>)
<ul>
<li class="fragment">Treated <span class="math inline">\(\alpha_i\)</span> as <span class="highlight"> parameters </span></li>
<li class="fragment">Got exactly the same results from two approaches</li>
</ul></li>
</ul>
</section>
<section id="lecture-questions" class="slide level4">
<h4>Lecture Questions</h4>
<ol type="1">
<li class="fragment">How to apply OLS on <a href="#/eq-panel-twfe-did-undiff" class="quarto-xref">Equation&nbsp;2</a>?</li>
</ol>
<ul>
<li class="fragment">What are the regressors? How to “treat <span class="math inline">\(\alpha_i\)</span> as parameters”?</li>
<li class="fragment">How does it work in practice?</li>
<li class="fragment">Is the estimator inspired by <a href="#/eq-panel-twfe-did-undiff" class="quarto-xref">Equation&nbsp;2</a> always equal to the one based on <a href="#/eq-panel-twfe-did-diff" class="quarto-xref">Equation&nbsp;1</a>?</li>
</ul>
<ol start="2" type="1">
<li class="fragment">Can we apply the same approach with general (not just 0/1) treatment? What are the causal properties?</li>
</ol>
</section>
</section>
<section>
<section id="fixed-effect-estimation" class="title-slide slide level2 center" data-background="#00100F">
<h2>Fixed Effect Estimation</h2>

</section>
<section id="random-intercept-fixed-effect-models" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Random Intercept (Fixed Effect) Models</h3>

</section>
<section id="first-goal-vector-matrix-representation" class="slide level4">
<h4>First Goal: Vector-Matrix Representation</h4>
<p>First question: “treating <span class="math inline">\(\alpha_i\)</span> as parameters”?</p>
<div class="fragment">
<p><br></p>
<p>For now forget about <span class="math inline">\(D_{it}\)</span> and <span class="math inline">\(\gamma\)</span> and consider: <span id="eq-panel-twfe-simplified-ind-intercept"><span class="math display">\[
Y_{it} = \alpha_i + U_{it}, \quad i=1,\dots, N; t=1, \dots, T
\tag{3}\]</span></span> <span class="math inline">\(\alpha_i\)</span> — individual-specific intercept (“unit fixed effect”). Data assumed balanced (same <span class="math inline">\(T\)</span> for all units)</p>
<p><br></p>
<p>Want to represent <a href="#/eq-panel-twfe-simplified-ind-intercept" class="quarto-xref">Equation&nbsp;3</a> in vector-matrix form</p>
</div>
</section>
<section id="vector-matrix-forms-for-panel-data-i" class="slide level4">
<h4>Vector-Matrix Forms for Panel Data I</h4>
<p>Before that: more info on matrix forms for panel data.</p>
<div class="fragment">
<p><br></p>
<p>Vector form as before: single observation (now fixed <span class="math inline">\(i\)</span> and <span class="math inline">\(t\)</span>) with vector of covariates: <span class="math display">\[
Y_{it} = \bX_{it}'\bbeta + U_{it}
\]</span></p>
</div>
</section>
<section id="vector-matrix-forms-for-panel-data-ii" class="slide level4">
<h4>Vector-Matrix Forms for Panel Data II</h4>
<p>Two key matrix forms:</p>
<ul>
<li class="fragment"><p>Individual level. Let <span class="math inline">\(\bY_i = (Y_{i1}, \dots, Y_{iT})\)</span>, <span class="math inline">\(\bX_i = (\bX_{i1}, \dots, \bX_{iT})'\)</span>, then <span class="math display">\[\small
\bY_i = \bX_i\bbeta + \bU_i
\]</span></p></li>
<li class="fragment"><p>Full sample. Let <span class="math inline">\(\bY = (\bY_1, \dots, \bY_N)\)</span>, <span class="math inline">\(\bX= (\bX_1', \dots, \bX_N')'\)</span>. Then <span class="math display">\[ \small
\bY = \bX\bbeta + \bU
\]</span> What are the dimensions of <span class="math inline">\(\bY_i, \bX_i, \bY, \bX\)</span>?</p></li>
</ul>
<div class="footer">

</div>
</section>
<section id="individual-matrix-form-with-individual-intercepts" class="slide level4">
<h4>Individual Matrix Form with Individual Intercepts</h4>
<p><br></p>
<p>Model (<a href="#/eq-panel-twfe-simplified-ind-intercept" class="quarto-xref">3</a>) in individual matrix form: <span class="math display">\[
\bY_i = \mathbf{1}_T\alpha_i + \bU_i
\]</span> where <span class="math inline">\(\mathbf{1}_T\)</span> — <span class="math inline">\(T\)</span>-vector of ones</p>
<div class="fragment">
<p><br></p>
<p>Not that insightful</p>
</div>
</section>
<section id="full-sample-matrix-form-with-individual-intercepts" class="slide level4">
<h4>Full Sample Matrix Form with Individual Intercepts</h4>
<p>Model (<a href="#/eq-panel-twfe-simplified-ind-intercept" class="quarto-xref">3</a>) in full sample matrix form <span id="eq-panel-twfe-one-way-matrix-form"><span class="math display">\[
\begin{aligned}
\bY &amp; = \bF \bLambda + \bU, \\
\bLambda &amp; = (\alpha_1, \dots, \alpha_N)', \\
\bF &amp; =  \bI_N \otimes \mathbf{1}_T,
\end{aligned}
\tag{4}\]</span></span> where <span class="math inline">\(\otimes\)</span> is the <a href="https://en.wikipedia.org/wiki/Kronecker_product">Kronecker product</a>. Intuition:</p>
<ul>
<li class="fragment">There are <span class="math inline">\(N\)</span> regressors, <span class="math inline">\(i\)</span>th regressor is the dummy of being the <span class="math inline">\(i\)</span>th unit (0/1 regressor values)</li>
<li class="fragment"><span class="math inline">\(\bLambda\)</span> — associated parameter vector</li>
</ul>
</section>
<section id="more-complex-example-two-way-intercept-model" class="slide level4">
<h4>More Complex Example: Two-Way Intercept Model</h4>
<p>Now consider more general model: <span class="math display">\[
Y_{it} = \alpha_i + \gamma_t + U_{it}
\]</span> Here want to treat both <span class="math inline">\(\alpha_i\)</span> and <span class="math inline">\(\gamma_t\)</span> as parameters</p>
<div class="fragment">
<p><br></p>
<p>Individual matrix form: <span class="math display">\[
\begin{aligned}
\bY_i &amp; = \mathbf{1}_T \alpha_i  + \bI_T \bgamma + \bU_i\\
\bgamma &amp; = (\gamma_1, \dots, \gamma_T)'
\end{aligned}
\]</span></p>
</div>
</section>
<section id="two-way-model-full-sample-matrix-form" class="slide level4">
<h4>Two-Way Model: Full Sample Matrix Form</h4>
<p>Can write <span class="math display">\[
\begin{aligned}
\bY &amp; = \bF\bLambda + \bU, \\
\bF &amp; =  \left(\bI_N \otimes \mathbf{1}_T, \mathbf{1}_N\otimes \bI_T \right)\\
\bLambda &amp; = (\alpha_1, \dots, \alpha_N, \gamma_1, \dots, \gamma_T)
\end{aligned}
\]</span></p>
<ul>
<li class="fragment">Both <span class="math inline">\(\alpha_{\cdot}\)</span> and <span class="math inline">\(\gamma_{\cdot}\)</span> treated as parameters</li>
<li class="fragment">Regressors in <span class="math inline">\(\bF\)</span>: <span class="math inline">\(N\)</span> dummy regressors from before; <span class="math inline">\(T\)</span> new dummy regressors, <span class="math inline">\(t\)</span>th new regressor — indicator of <span class="math inline">\(t\)</span>th period</li>
</ul>
</section>
<section id="adding-other-covariates" class="slide level4">
<h4>Adding Other Covariates</h4>
<p>Can write <a href="#/eq-panel-twfe-did-undiff" class="quarto-xref">Equation&nbsp;2</a> as <span class="math display">\[
Y_{it} = \alpha_i + \gamma_t + \bX_{it}'\bbeta + U_{it},
\]</span> for <span class="math inline">\(\bX_{it} = (D_{it})\)</span> and <span class="math inline">\(\bbeta = (\delta)\)</span></p>
<div class="fragment">
<p>More generally, consider any vector <span class="math inline">\(\bX_{it}\)</span> — <span class="highlight"> not just binary treatments </span></p>
</div>
<div class="fragment">
<p><br></p>
<p>Its matrix form is <span class="math display">\[
\bY = \bF\bLambda + \bX\beta + \bU
\]</span></p>
<div class="footer">

</div>
</div>
</section>
<section id="random-intercept-fixed-effects-models" class="slide level4">
<h4>Random-Intercept (Fixed Effects) Models</h4>
<div class="rounded-box">
<div id="def-panel-twfe-fe-model" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1</strong></span> Models of the kind <span id="eq-panel-twfe-fixeff-def"><span class="math display">\[ \small
\bY = \bF\bLambda +\bX\bbeta + \bU,
\tag{5}\]</span></span> where <span class="math inline">\(\bF\)</span> is a matrix of 0s and 1s are called <em>fixed effects</em> or <em>random intercept</em> models</p>
</div>
</div>
<div class="fragment">
<ul>
<li class="fragment">Fixed effects and random intercepts — often used interchangeably</li>
<li class="fragment"><span class="highlight">Random intercepts</span> — less ambiguous</li>
</ul>
</div>
</section>
<section id="examples-of-model--eq-panel-twfe-fixeff-def" class="slide level4">
<h4>Examples of Model (<a href="#/eq-panel-twfe-fixeff-def" class="quarto-xref">5</a>)</h4>
<ul>
<li class="fragment">Individual fixed effects/intercepts (one-way) <span class="math display">\[
Y_{it} = \alpha_i + \bX_i'\bbeta + U_{it}
\]</span></li>
<li class="fragment">Two-way models (time and individual effects): <span class="math display">\[
Y_{it} = \alpha_i + \gamma_t + \bX_i'\bbeta + U_{it}
\]</span></li>
<li class="fragment">Can include more complicated effects, see empirical illustration (where <span class="math inline">\(i\)</span> — US counties, <span class="math inline">\(t\)</span> — quarters; effects — county-season and state-year)</li>
</ul>
</section>

<section id="fixed-effect-within-estimators" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Fixed Effect (Within) Estimators</h3>

</section>
<section id="estimation-strategies" class="slide level4">
<h4>Estimation Strategies</h4>
<p>Suppose <span class="math inline">\(\E[U_{it}|\bX_i]=0\)</span>. How to estimate parameters of Model (<a href="#/eq-panel-twfe-fixeff-def" class="quarto-xref">5</a>)?</p>
<div class="fragment">
<p><br></p>
<p>There are two main strategies:</p>
<ul>
<li class="fragment">Estimate including <span class="math inline">\(\bF\)</span> and <span class="math inline">\(\bX\)</span> as regressors — <span class="highlight">least squares dummy variable</span> (LSDV) estimator</li>
<li class="fragment">Get rid of <span class="math inline">\(\bF\)</span>, estimate after — <span class="highlight">within</span> estimator</li>
</ul>
</div>
</section>
<section id="lsdv-estimation" class="slide level4">
<h4>LSDV Estimation</h4>
<p>LSDV — simply regress <span class="math inline">\(\bY\)</span> on <span class="math inline">\((\bF, \bX)\)</span>: <span class="math display">\[
(\hat{\bLambda}, \hat{\bbeta}^{LSDV}) = \argmin_{\bL, \bb} \norm{\bY - \bF\bL -\bX\bb  }_2^2
\]</span></p>
<div class="fragment">
<p>For example with two-way effects:</p>
<p><span class="math display">\[\small
\begin{aligned}
&amp; \left(\hat{\alpha}_1, \dots, \hat{\alpha}_N, \hat{\gamma}_1, \dots, \hat{\gamma}_T, \hat{\bbeta}^{LSDV} \right)\\
&amp; = \argmin_{a_1, \dots, a_N, g_1, \dots, g_T, \bb}\sum_{i=1}^N \sum_{t=1}^T \left(Y_{it} - a_i - g_t - \bX_{it}'\bb \right)^{2}
\end{aligned}
\]</span></p>
</div>
</section>
<section id="within-estimation-i-one-way-transformation" class="slide level4">
<h4>Within Estimation I: One-Way Transformation</h4>
<!-- 
Within transformations <span class="highlight">eliminate </span> fixed effects (=$\bF$)

. . . 

<br> -->
<p>First consider one-way model <span class="math inline">\(Y_{it} = \alpha_{i} + \bX_{it}' + U_{it}\)</span>. For <span class="math inline">\(\bW_{it} = Y_{it}, \bX_{it}, U_{it}\)</span>, define the (one-way) <span class="highlight">within-transformed</span> version of <span class="math inline">\(W_{it}\)</span> as <span id="eq-panel-twfe-one-way-transform"><span class="math display">\[ \small
\tilde{W}_{it} = W_{it} - \dfrac{1}{T}\sum_{s=1}^T W_{is}
\tag{6}\]</span></span></p>
<div class="fragment">
<p>Within transformation <span class="highlight">eliminated </span> fixed effects (=<span class="math inline">\(\bF\)</span>) <span class="math display">\[ \small
\tilde{Y}_{it} = \tilde{\bX}_{it}'\bbeta + \tilde{U}_{it}
\]</span></p>
</div>
</section>
<section id="within-estimation-ii-two-way-transformations" class="slide level4">
<h4>Within Estimation II: Two-Way Transformations</h4>
<p>Suppose <span class="math inline">\(Y_{it} = \alpha_i + \gamma_t + \bX_{it}'\bbeta + U_{it}\)</span>. Define (two-way) <span class="highlight">within-transformed</span> variables as <span id="eq-panel-twfe-two-way-transform"><span class="math display">\[ \small
\tilde{W}_{it} = W_{it} - \dfrac{1}{T}\sum_{s=1}^T W_{is} - \dfrac{1}{N} \sum_{j=1}^N W_{jt} + \dfrac{1}{NT} \sum_{j=1}^N \sum_{s=1}^T W_{js}
\tag{7}\]</span></span></p>
<div class="fragment">
<p>Again <span class="highlight">eliminated </span> fixed effects (=<span class="math inline">\(\bF\)</span>) <span class="math display">\[ \small
\tilde{Y}_{it} = \tilde{\bX}_{it}'\bbeta + \tilde{U}_{it}
\]</span></p>
<div class="footer">
<p>Can find the matrix formula in section 3.2 of <span class="citation" data-cites="Baltagi2021EconometricAnalysisPanel">Baltagi (<a href="#/references-1" role="doc-biblioref" onclick="">2021</a>)</span></p>
</div>
</div>
</section>
<section id="more-general-within-transformation" class="slide level4">
<h4>More General Within Transformation</h4>
<div class="rounded-box">
<p>Consider general model: <span class="math display">\[ \small
\bY = \bF\bLambda + \bX\bbeta + \bU
\]</span></p>
<p>There exists a linear transformation that eliminates <span class="math inline">\(\bF\)</span>: <span class="math display">\[ \small
\tilde{\bY} = \tilde{\bX}\bbeta + \tilde{\bU}
\]</span></p>
</div>
<p>Called the FWL or the (generalized) <span class="highlight">within </span> transformation</p>
<div class="footer">
<p>Transformations — just application of the Frisch-Waugh-Lowell (“anatomy of regression”) theorem. See E1a in <span class="citation" data-cites="Wooldridge2020IntroductoryEconometricsModern">Wooldridge (<a href="#/references-1" role="doc-biblioref" onclick="">2020</a>)</span></p>
</div>
</section>
<section id="within-estimation" class="slide level4">
<h4>Within Estimation</h4>
<p>Within estimation: just regressing <span class="math inline">\(\tilde{\bY}\)</span> on <span class="math inline">\(\tilde{\bX}\)</span> with OLS: <span class="math display">\[
\hat{\bbeta}^{W} = \argmin_{\bb} \sum_{i=1}^N \sum_{t=1}^N (\tilde{Y}_{it} - \tilde{\bX}_{it}'\bb)^2
\]</span></p>
<ul>
<li class="fragment"><span class="math inline">\(\tilde{\bX}\)</span> must have maximum column rank (no collinearity in transformed regressors)</li>
<li class="fragment">Intuition in one-way case (only <span class="math inline">\(\alpha_i\)</span>): some variation in <span class="math inline">\(\bX_{it}\)</span> over time</li>
</ul>
</section>
<section id="equivalence-of-approaches" class="slide level4">
<h4>Equivalence of Approaches</h4>
<div class="rounded-box">
<div id="prp-panel-twfe-equivalence-lsdv-w" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 1</strong></span> <span class="math display">\[
\hat{\bbeta}^{LSDV} = \hat{\bbeta}^{W}
\]</span></p>
</div>
</div>
<ul>
<li class="fragment">Both approaches: same estimated values</li>
<li class="fragment">Explains why we got same results from two regression approaches to DiD last time</li>
<li class="fragment">Allows to use single name for both estimators. Usually called <span class="highlight">fixed effects</span> or <span class="highlight">random intercept</span> estimators</li>
</ul>
<div class="footer">
<p>Not examinable: proof is a consequence of Frisch-Waugh-Lowell theorem <span class="citation" data-cites="Wooldridge2020IntroductoryEconometricsModern">(E1a in <a href="#/references-1" role="doc-biblioref" onclick="">Wooldridge 2020</a>)</span></p>
</div>
</section>
<section id="which-approach-to-use" class="slide level4">
<h4>Which Approach to Use?</h4>
<p>When to use LSDV vs.&nbsp;within estimation?</p>
<ul>
<li class="fragment">LSDV: only when you care about <span class="math inline">\(\Lambda\)</span> and they have some economic meaning. Example: <span class="math inline">\(\alpha_i\)</span> is the innate skill of worker <span class="math inline">\(i\)</span> <span class="citation" data-cites="delaRoca2017LearningWorkingBig">(e.g. <a href="#/references-1" role="doc-biblioref" onclick="">de la Roca and Puga 2017</a>)</span></li>
<li class="fragment">Within: in all other cases</li>
</ul>
<div class="fragment">
<div class="callout callout-important no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>Sometimes impossible to compute LSDV estimator: number of fixed effects is too large to even simply store the data matrix:</p>
<ul>
<li class="fragment">Called the “high-dimensional” fixed effect case</li>
<li class="fragment">In practice the within transformation is cleverly done indirectly <span class="citation" data-cites="Correia2016FeasibleEstimatorLinear">(<a href="#/references-1" role="doc-biblioref" onclick="">Correia 2016</a>)</span></li>
</ul>
</div>
</div>
</div>
</div>
</section>
<section id="pooled-ols" class="slide level4">
<h4>Pooled OLS</h4>
<p><br></p>
<p>Another special case of model (<a href="#/eq-panel-twfe-fixeff-def" class="quarto-xref">5</a>) — <span class="highlight"> pooled OLS</span>:</p>
<ul>
<li class="fragment">No fixed effects, directly regressing <span class="math inline">\(Y_{it}\)</span> on <span class="math inline">\(\bX_{it}\)</span></li>
<li class="fragment">Fully ignoring the panel structure</li>
<li class="fragment">Involves no transformations and no <span class="math inline">\(\bF\)</span></li>
<li class="fragment">Interpretation: the <em>least flexible</em> example of (<a href="#/eq-panel-twfe-fixeff-def" class="quarto-xref">5</a>)</li>
</ul>
</section>
<section id="implementation-in-python" class="slide level4">
<h4>Implementation in Python</h4>
<ul>
<li class="fragment"><code>linearmodels</code> supports both LSDV and within transformations
<ul>
<li class="fragment">Defaults to eliminating effects</li>
<li class="fragment">LSDV can be used with <code>PanelOLS.fit(use_lsdv=True)</code></li>
</ul></li>
<li class="fragment"><code>pyfixest</code> was designed for high-dimensional FE estimation (can handle small examples too)
<ul>
<li class="fragment">LSDV not available (to the best of my knowledge)</li>
<li class="fragment">See empirical application for example usage</li>
</ul></li>
</ul>
</section>
</section>
<section>
<section id="causal-properties-with-general-treatment" class="title-slide slide level2 center" data-background="#00100F">
<h2>Causal Properties with General Treatment</h2>

</section>
<section id="question-causal-properties-of-fe-estimators" class="slide level4">
<h4>Question: Causal Properties of FE Estimators</h4>
<p>So far:</p>
<ul>
<li class="fragment">Now have described the estimation approach underlying DiD regression estimation</li>
<li class="fragment">Noticed that it can handle general treatments <span class="math inline">\(\bX_{it}\)</span>, not just scalar binary <span class="math inline">\(D_{it}\)</span></li>
</ul>
<div class="fragment">
<div class="rounded-box">
<p>What are the causal properties of such estimators? Under which models do they give meaningful results?</p>
</div>
</div>
</section>
<section id="reflection-on-our-approach" class="slide level4">
<h4>Reflection on our Approach</h4>
<p>Note:</p>
<ul>
<li class="fragment">Approach this problem differently:
<ul>
<li class="fragment">Here first formulate an estimator and only now start understanding causal properties</li>
<li class="fragment">Usually goes the other way: fix causal problem, try to figure out identification and estimation</li>
</ul></li>
<li class="fragment">Doing so for historic reasons — these estimators came first, serious causal thinking more recently</li>
</ul>
</section>
<section id="models-considered" class="slide level4">
<h4>Models Considered</h4>
<p><br></p>
<p>Will consider two kinds of models under strict exogeneity</p>
<ul>
<li class="fragment">Random intercept causal process with same <span class="math inline">\(\bbeta\)</span> for everyone — reflects estimator structure</li>
<li class="fragment">Model with heterogeneous effects <span class="math inline">\(\bbeta_i\)</span></li>
</ul>
</section>
<section id="properties-under-random-intercept-model" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Properties under Random Intercept Model</h3>

</section>
<section id="causal-framework-with-random-intercepts" class="slide level4">
<h4>Causal Framework with Random Intercepts</h4>
<ul>
<li class="fragment">Some vector of treatments <span class="math inline">\(\bX_{it}\)</span></li>
<li class="fragment">Potential outcome of unit <span class="math inline">\(i\)</span> in time <span class="math inline">\(t\)</span> given by <span id="eq-panel-twfe-causal-random-intercept"><span class="math display">\[
Y^{\bx}_{it} = \alpha_i + \gamma_t + \bx'\bbeta + U_{it}
\tag{8}\]</span></span></li>
<li class="fragment">Will think about about exogeneity conditions later</li>
<li class="fragment">Object of interest — <span class="math inline">\(\bbeta\)</span> (plays the role of ATE, ATT, …)</li>
</ul>
<div class="callout callout-note no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>For definiteness, we do two-way effects, but can apply same analysis for any configuration of random intercepts, just need to define <span class="math inline">\(\tilde{Y}_{it}\)</span> appropriately</p>
</div>
</div>
</div>
</section>
<section id="sampling-setting" class="slide level4">
<h4>Sampling Setting</h4>
<p>Work in the following setting</p>
<ul>
<li class="fragment">Units drawn IID</li>
<li class="fragment"><span class="math inline">\(N\)</span> large, <span class="math inline">\(T\)</span> fixed
<ul>
<li class="fragment">More typical kind of panel data (“micro” panel)</li>
<li class="fragment">Contrast with “large” panel data with both <span class="math inline">\(N\)</span> and <span class="math inline">\(T\)</span> large</li>
</ul></li>
</ul>
</section>
<section id="causal-framework-discussion-of-model--eq-panel-twfe-causal-random-intercept" class="slide level4">
<h4>Causal Framework: Discussion of Model (<a href="#/eq-panel-twfe-causal-random-intercept" class="quarto-xref">8</a>)</h4>
<ul>
<li class="fragment">Contrast with less flexible causal model discussed before: <span class="math display">\[
Y_{it}^{\bx} = \bx'\bbeta + U_{it}
\]</span></li>
<li class="fragment">Interpretations:
<ul>
<li class="fragment"><span class="math inline">\(\alpha_i\)</span> — often some characteristic of <span class="math inline">\(i\)</span> that does not change over considered sample (e.g.&nbsp;innate intellect)</li>
<li class="fragment"><span class="math inline">\(\gamma_t\)</span> — shocks that affect everyone equally</li>
<li class="fragment">Similar logic for other types of random interecepts</li>
</ul></li>
</ul>
<div class="footer">

</div>
</section>
<section id="estimator-for-bbeta" class="slide level4">
<h4>Estimator for <span class="math inline">\(\bbeta\)</span></h4>
<ul>
<li class="fragment">Estimate <span class="math inline">\(\bbeta\)</span> with the FE estimator, expressed as (<a href="#/prp-panel-twfe-equivalence-lsdv-w" class="quarto-xref">Proposition&nbsp;1</a>) <span class="math display">\[ \small
\begin{aligned}
\hat{\bbeta}^{FE} &amp; = \left(\sum_{i=1}^N \sum_{t=1}^T \tilde{\bX}_{it}\tilde{\bX}_{it}' \right)^{-1}\sum_{i=1}^N \sum_{t=1}^T \tilde{\bX}_{it}\tilde{Y}_{it} \\
&amp; = \left( \sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i
\right)\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bY}_i
\end{aligned}
\]</span> with variables transformed as in <a href="#/eq-panel-twfe-two-way-transform" class="quarto-xref">Equation&nbsp;7</a></li>
<li class="fragment">Will discuss nonsingularity assumptions a bit later</li>
</ul>
<div class="footer">

</div>
</section>
<section id="probability-limit-of-hatbbetafe" class="slide level4">
<h4>Probability Limit of <span class="math inline">\(\hat{\bbeta}^{FE}\)</span></h4>
<p>Realized data satisfies <span class="math inline">\(\tilde{\bY} = \tilde{\bX}_{it}'\bbeta + \tilde{U}_{it}\)</span> . . .</p>
<p><br></p>
<p>So as <span class="math inline">\(N\to\infty\)</span> and <span class="math inline">\(T\)</span> is fixed: <span class="math display">\[ \small
\hat{\bbeta}^{FE} \xrightarrow{p} \bbeta + \left(  \E[\tilde{\bX}_{i}'\tilde{\bX}_i]\right)^{-1} \E[\tilde{\bX}_{i}'\tilde{\bU}_{i}]
\]</span></p>
<div class="fragment">
<p><span class="math inline">\(T\)</span> fixed — basically treat each unit a single <span class="math inline">\(T\)</span>-dimensional observation (as in <span class="math inline">\(\tilde{\bU}_i\)</span>)</p>
</div>
</section>
<section id="rank-nonsingularity-conditions" class="slide level4">
<h4>Rank (Nonsingularity) Conditions</h4>
<p>So far needed to impose nonsingularity conditions</p>
<ul>
<li class="fragment">Sample: on <span class="math inline">\(\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i\)</span></li>
<li class="fragment">Population: on <span class="math inline">\(\E[\tilde{\bX}_{i}'\tilde{\bX}_i]\)</span></li>
</ul>
<div class="fragment">
<p>What does it require of <span class="math inline">\(\bX_{it}\)</span>?</p>
<ul>
<li class="fragment">No collinearity</li>
<li class="fragment">Also variation <span class="highlight">after </span> the within transformation (one-way: variation over time; two-way: <em>different</em> variation over time for different units; etc.)</li>
</ul>
</div>
</section>
<section id="towards-exogeneity-conditions" class="slide level4">
<h4>Towards Exogeneity Conditions</h4>
<p>For consistency want <span class="math display">\[ \small
\E[\tilde{\bX}_i'\tilde{\bU}_i] = \sum_{t=1}^T \E\left[\tilde{\bX}_{it} \tilde{U}_{it} \right] =0
\]</span></p>
<div class="fragment">
<p>Sufficient that for all <span class="math inline">\(t\)</span> <span id="eq-panel-twfe-key-orthogonality"><span class="math display">\[ \small
\E\left[\tilde{\bX}_{it} \tilde{U}_{it} \right] =0
\tag{9}\]</span></span></p>
<p>What does this condition require of <span class="math inline">\(\bX_{it}\)</span> and <span class="math inline">\(U_{it}\)</span>?</p>
</div>
</section>
<section id="exogeneity-in-the-one-way-case" class="slide level4">
<h4>Exogeneity in the One-Way Case</h4>
<p>Under one-way transformation (<a href="#/eq-panel-twfe-one-way-transform" class="quarto-xref">6</a>), <a href="#/eq-panel-twfe-key-orthogonality" class="quarto-xref">Equation&nbsp;9</a> becomes <span class="math display">\[ \scriptsize
\E\left[\tilde{\bX}_{it} \tilde{U}_{it} \right] = \E\left[ \bX_{it}U_{it} - \dfrac{\bX_{it}}{T}\sum_{s=1}^T U_{it} - \dfrac{U_{it}}{T}\sum_{r=1}^T \bX_{it}  + \dfrac{1}{T^2} \sum_{s=1}^T\sum_{r=1}^T \bX_{it} U_{ir}\right] = 0
\]</span></p>
<p>Here would be sufficient that for all <span class="math inline">\(t\)</span>, <span class="math inline">\(s\)</span> <span id="eq-panel-twfe-raw-orthogonality"><span class="math display">\[ \small
\E[\bX_{it}U_{is}] = 0
\tag{10}\]</span></span> Intuition: <span class="math inline">\(\bX_{it}\)</span> and <span class="math inline">\(U_{is}\)</span> are uncorrelated across all points in time</p>
<div class="footer">
<p>Problematic direction is usually <span class="math inline">\(s&lt;t\)</span>: predicting future <span class="math inline">\(\bX_{it}\)</span> from past <span class="math inline">\(U_{is}\)</span> (your shocks influence your future decisions)</p>
</div>
</section>
<section id="strict-exogeneity-in-the-panel-case" class="slide level4">
<h4>Strict Exogeneity in the Panel Case</h4>
<p>What about beyond one-way effects? Usually impose an assumption that covers all cases — <span class="highlight"> panel data version of strict exogeneity </span> is imposed:</p>
<div class="rounded-box">
<p><strong>Assumption</strong> (<em>strict exogeneity</em>): <span class="math display">\[
\E[U_{it} | \bX_{i1}, \dots, \bX_{iT}] =0
\]</span></p>
</div>
<p>Much stronger than just <span class="math inline">\(\E[U_{it}|\bX_{it}]=0\)</span></p>
</section>
<section id="strict-exogeneity-implies-eq-panel-twfe-key-orthogonality" class="slide level4">
<h4>Strict Exogeneity Implies <a href="#/eq-panel-twfe-key-orthogonality" class="quarto-xref">Equation&nbsp;9</a></h4>
<div class="rounded-box">
<div id="prp-panel-twfe-orthogonalities" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 2</strong></span> Let <span class="math inline">\(\E[U_{is} | \bX_{i1}, \dots, \bX_{iT}] =0\)</span> for all <span class="math inline">\(s\)</span>. Then for any within transformation it holds for all <span class="math inline">\(t\)</span> that <span class="math display">\[
\E[\tilde{\bX}_{i}'\tilde{\bU}_i] =0
\]</span></p>
</div>
</div>
<ul>
<li class="fragment">Proof by properties of conditional expectations</li>
<li class="fragment">Covers all configurations of random intercepts</li>
</ul>
<div class="footer">
<p>See first block for key properties of conditional expectation</p>
</div>
</section>
<section id="consistency-result" class="slide level4">
<h4>Consistency Result</h4>
<div class="rounded-box">
<div id="prp-panel-twfe-fe-consistency" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 3</strong></span> Let</p>
<ol type="1">
<li class="fragment"><span class="math inline">\((\bX_i, \bU_i)\)</span> be IID and model (<a href="#/eq-panel-twfe-causal-random-intercept" class="quarto-xref">8</a>) be true</li>
<li class="fragment"><span class="math inline">\(\E[\tilde{\bX}_i'\tilde{\bX}_i]\)</span> exist and be invertible</li>
<li class="fragment"><span class="math inline">\(\E[U_{it} | \bX_{i1}, \dots, \bX_{iT}] =0\)</span></li>
</ol>
<p>Then as <span class="math inline">\(N\to\infty\)</span></p>
<p><span class="math display">\[
\hat{\bbeta}^{FE} \xrightarrow{p} \bbeta
\]</span></p>
</div>
</div>
</section>
<section id="asymptotic-distribution" class="slide level4">
<h4>Asymptotic Distribution</h4>
<div class="rounded-box">
<div id="prp-panel-twfe-fe-consistency" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 4</strong></span> Let</p>
<ol type="1">
<li class="fragment"><span class="math inline">\((\bX_i, \bU_i)\)</span> be IID and model (<a href="#/eq-panel-twfe-causal-random-intercept" class="quarto-xref">8</a>) be true</li>
<li class="fragment"><span class="math inline">\(\E[\tilde{\bX}_i'\tilde{\bX}_i]\)</span> exist and be invertible; <span class="math inline">\(\E\left[\norm{\tilde{\bX}_i'\tilde{\bU}_i}^2\right]&lt;\infty\)</span></li>
<li class="fragment"><span class="math inline">\(\E[U_{it} | \bX_{i1}, \dots, \bX_{iT}] =0\)</span></li>
</ol>
<p>Then as <span class="math inline">\(N\to\infty\)</span></p>
<p><span class="math display">\[ \scriptsize
\sqrt{N}\left(\hat{\bbeta}^{FE} - \bbeta\right) \xrightarrow{d} N\left(0, \left(\E[\tilde{\bX}_i'\tilde{\bX}_i] \right)^{-1} \E[\tilde{\bX}_i'\tilde{\bU}_i\tilde{\bU}_i'\tilde{\bX}_i] \left(\E[\tilde{\bX}_i'\tilde{\bX}_i] \right)^{-1}\right)
\]</span></p>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="discussion-of-asymptotic-results-for-hatbbetafe" class="slide level4">
<h4>Discussion of Asymptotic Results for <span class="math inline">\(\hat{\bbeta}^{FE}\)</span></h4>
<ul>
<li class="fragment">Can do inference and estimate errors in more or less standard way (confidence intervals, hypothesis tests, …)</li>
<li class="fragment">Proof of asymptotic normality — exercise</li>
<li class="fragment"><em>Not examinable</em> technical point: some within transformations (e.g.&nbsp;two-way) can create dependence across <span class="math inline">\(i\)</span>. This dependence disappears as <span class="math inline">\(N\to\infty\)</span> and does not affect asymptotics</li>
</ul>
</section>

<section id="properties-under-heterogeneous-coefficient-model" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Properties under Heterogeneous Coefficient Model</h3>

</section>
<section id="causal-framework-with-heterogeneous-coefficients" class="slide level4">
<h4>Causal Framework with Heterogeneous Coefficients</h4>
<p>Consider different potential outcomes setting: <span id="eq-panel-twfe-causal-unit-coefs"><span class="math display">\[ \small
Y_{it}^{\bx} = \bx'\bbeta_{\textcolor{teal}{i}} + U_{it}
\tag{11}\]</span></span> under strict exogeneity <span class="math inline">\(\E[U_{it} | \bX_{i1}, \dots, \bX_{iT}] =0\)</span></p>
<ul>
<li class="fragment">Special case: unit-specific intercepts</li>
<li class="fragment">Does not nest two-way or other random intercepts with time variation</li>
<li class="fragment">(<a href="#/eq-panel-twfe-causal-unit-coefs" class="quarto-xref">11</a>) interesting because it allows heterogeneous effects of same change in <span class="math inline">\(\bX_{it}\)</span></li>
</ul>
<div class="footer">
<p>If <span class="math inline">\(\E[\bbeta_i|\bX_{i1}, \dots, \bX_{iT}] = \E[\bbeta_i]\)</span>, then (<a href="#/eq-panel-twfe-causal-unit-coefs" class="quarto-xref">11</a>) — special case of (<a href="#/eq-panel-twfe-causal-random-intercept" class="quarto-xref">8</a>). This assumption usually unrealistic for panel data</p>
</div>
</section>
<section id="fe-estimator" class="slide level4">
<h4>FE Estimator</h4>
<p>Can still use the FE estimator: <span class="math display">\[
\hat{\bbeta}^{FE} = \left(\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i \right)^{-1}\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bY}_i
\]</span> Can do any transformation such that <span class="math inline">\(\E[\tilde{\bX}_i\tilde{\bX}_i]\)</span> is invertible</p>
<div class="fragment">
<p><br></p>
<div class="rounded-box">
<p>What does <span class="math inline">\(\hat{\bbeta}^{FE}\)</span> do under model (<a href="#/eq-panel-twfe-causal-unit-coefs" class="quarto-xref">11</a>)?</p>
</div>
</div>
</section>
<section id="expanding-estimator-and-taking-limits" class="slide level4">
<h4>Expanding Estimator and Taking Limits</h4>
<p>Substituting model (<a href="#/eq-panel-twfe-causal-unit-coefs" class="quarto-xref">11</a>) gets us <span class="math display">\[ \small
\begin{aligned}
\hat{\bbeta}^{FE} &amp; = \left(\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i \right)^{-1}\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i\bbeta_i\\
&amp; = \left(\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bX}_i \right)^{-1}\sum_{i=1}^N \tilde{\bX}_i'\tilde{\bU}_i\\
&amp; \xrightarrow{p} \E\left[ \bW(\tilde{\bX}_i) \bbeta_i\right]
\end{aligned}
\]</span> for <span class="math inline">\(\small\bW(\tilde{\bX}_i) = \left(\E\left[\tilde{\bX}_i\tilde{\bX}_i\right] \right)^{-1} \tilde{\bX}_i\tilde{\bX}_i\)</span></p>
<div class="footer">

</div>
</section>
<section id="discussion-of-hatbbetafe-under-heterogeneous-effects" class="slide level4">
<h4>Discussion of <span class="math inline">\(\hat{\bbeta}^{FE}\)</span> under Heterogeneous Effects</h4>
<ul>
<li class="fragment">Result: FE estimator estimate weighted average of <span class="math inline">\(\bbeta_i\)</span>
<ul>
<li class="fragment">Weights are positive definite and sum to one<br>
</li>
<li class="fragment">Weights depend on within transformation used</li>
</ul></li>
<li class="fragment">In general <span class="math inline">\(\E\left[ \bW(\tilde{\bX}_i) \bbeta_i\right]\neq \E[\bbeta_i]\)</span> (true in RCTs)</li>
<li class="fragment">Careful: <span class="math inline">\(\E\left[ \bW(\tilde{\bX}_i) \bbeta_i\right]\)</span> and <span class="math inline">\(\E[\bbeta_i]\)</span> can even have different signs sometimes</li>
</ul>
</section>
<section id="extension-factor-models" class="slide level4">
<h4>Extension: Factor Models</h4>
<p>Can generalize random intercept models to the form <span class="math display">\[
Y_{it}^{\bx} = \balpha_i'\bgamma_t + \bx'\bbeta_i + U_{it}
\]</span></p>
<ul>
<li class="fragment"><span class="math inline">\(\bgamma_t\)</span> — unobserved “factors”, <span class="math inline">\(\balpha_i\)</span> — factor loadings</li>
<li class="fragment">Allows people to react differently to same shocks in <span class="math inline">\(\bgamma_t\)</span></li>
<li class="fragment">See chapter 29 in <span class="citation" data-cites="Pesaran2015TimeSeriesPanel">Pesaran (<a href="#/references-1" role="doc-biblioref" onclick="">2015</a>)</span></li>
</ul>
</section>
</section>
<section>
<section id="empirical-application" class="title-slide slide level2 center" data-background="#00100F">
<h2>Empirical Application</h2>

</section>
<section id="context-and-setting" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Context and Setting</h3>

</section>
<section id="context" class="slide level4">
<h4>Context</h4>
</section>
<section id="section" class="slide level4">
<h4></h4>
<p>High-dimensional case!</p>
</section>
</section>
<section>
<section id="recap-and-conclusions" class="title-slide slide level2 center" data-background="#00100F">
<h2>Recap and Conclusions</h2>

</section>
<section id="recap" class="slide level4">
<h4>Recap</h4>
<p>In this lecture we</p>
<ol type="1">
<li class="fragment">Did</li>
</ol>
</section>
<section id="next-questions" class="slide level4">
<h4>Next Questions</h4>
<ul>
<li class="fragment">What if you want to estimate <span class="math inline">\(\E[\bbeta_i]\)</span>?</li>
<li class="fragment">When does strict exogeneity fail? Can you relax it?</li>
<li class="fragment">What does panel data let you do in nonlinear settings?</li>
</ul>
</section>
<section id="references-1" class="slide level4 allowframebreaks smaller scrollable" data-visibility="uncounted">
<h4>References</h4>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Baltagi2021EconometricAnalysisPanel" class="csl-entry" role="listitem">
Baltagi, Badi H. 2021. <em>Econometric <span>Analysis</span> of <span>Panel Data</span></em>. Springer <span>Texts</span> in <span>Business</span> and <span>Economics</span>. Cham: Springer International Publishing. <a href="https://doi.org/10.1007/978-3-030-53953-5">https://doi.org/10.1007/978-3-030-53953-5</a>.
</div>
<div id="ref-Correia2016FeasibleEstimatorLinear" class="csl-entry" role="listitem">
Correia, Sergio. 2016. <span>“A <span>Feasible Estimator</span> for <span>Linear Models</span> with <span>Multi-Way Fixed Effects</span>.”</span>
</div>
<div id="ref-delaRoca2017LearningWorkingBig" class="csl-entry" role="listitem">
de la Roca, Jorge, and Diego Puga. 2017. <span>“Learning <span>By Working</span> in <span>Big Cities</span>.”</span> <em>Review of Economic Studies</em> 84 (1): 106–42. <a href="https://doi.org/10.1093/restud/rdw031">https://doi.org/10.1093/restud/rdw031</a>.
</div>
<div id="ref-Hansen2022Econometrics" class="csl-entry" role="listitem">
Hansen, Bruce. 2022. <em>Econometrics</em>. Princeton_University_Press.
</div>
<div id="ref-Huntington-Klein2025EffectIntroductionResearch" class="csl-entry" role="listitem">
Huntington-Klein, Nick. 2025. <em>The <span>Effect</span>: <span>An Introduction</span> to <span>Research Design</span> and <span>Causality</span></em>. S.l.: <span>Chapman and Hall/CRC</span>.
</div>
<div id="ref-Pesaran2015TimeSeriesPanel" class="csl-entry" role="listitem">
Pesaran, M. Hashem. 2015. <em>Time <span>Series</span> and <span>Panel Data Econometrics</span></em>. Oxford University Press. <a href="https://doi.org/10.1093/acprof:oso/9780198736912.001.0001">https://doi.org/10.1093/acprof:oso/9780198736912.001.0001</a>.
</div>
<div id="ref-Wooldridge2020IntroductoryEconometricsModern" class="csl-entry" role="listitem">
Wooldridge, Jeffrey M. 2020. <em>Introductory <span>Econometrics</span>: A <span>Modern Approach</span></em>. Seventh edition. Boston, MA: Cengage.
</div>
</div>
<div class="footer">

</div>


<div class="reveal-header">
<div class="header-logo" data-footer-logo-link="https://vladislav-morozov.github.io/econometrics-2/">
<img data-src="">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">
<p> </p>
</div>
<div class="sb-title">
<p> </p>
</div>
</div>
</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../themes/favicon.ico" class="slide-logo"></p>
<div class="footer footer-default">
<p>Panel Data: Linear Panel Data Models</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'convex',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1150,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/vladislav-morozov\.github\.io\/econometrics-2\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>