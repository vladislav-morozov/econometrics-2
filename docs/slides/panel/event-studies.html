<!DOCTYPE html>
<html lang="en"><head>
<link href="../../themes/favicon.ico" rel="icon">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-0de45b8b5f35a93596f1d788d60c4c11.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/quarto-contrib/reveal-header-1.0.0/add_header.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/reveal-header-1.0.0/add_header.css" rel="stylesheet">
<script src="../../site_libs/quarto-contrib/sc-sb-title-1.0.0/sc_sb_title.js" defer="true"></script>
<link href="../../site_libs/quarto-contrib/grid-no-htext-1.0.0/grid_no_htext.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <meta name="author" content="Vladislav Morozov">
  <title>Advanced Econometrics – Event Studies</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #f8f8f8; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; } /* Alert */
    code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #204a87; } /* Attribute */
    code span.bn { color: #0000cf; } /* BaseN */
    code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4e9a06; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #8f5902; font-style: italic; } /* Comment */
    code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #204a87; } /* DataType */
    code span.dv { color: #0000cf; } /* DecVal */
    code span.er { color: #a40000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #0000cf; } /* Float */
    code span.fu { color: #204a87; font-weight: bold; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
    code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; } /* Other */
    code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
    code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
    code span.ss { color: #4e9a06; } /* SpecialString */
    code span.st { color: #4e9a06; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #4e9a06; } /* VerbatimString */
    code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-cb5537517b990794adf0c72e32550bcc.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
   

  <!-- This is what works with Quarto and MathJax 3+ -->

  <script>

    MathJax = {

      tex: {

        tags: 'ams',  // should be 'ams', 'none', or 'all'

        macros: {

          vect: ["\\mathbf{#1}", 1],

          mat: ["\\mathbf{#1}", 1], 

  

          bA: "\\boldsymbol{A}",

          bB: "\\boldsymbol{B}",

          bC: "\\boldsymbol{C}",

          bD: "\\boldsymbol{D}",

          bE: "\\boldsymbol{E}",

          bF: "\\boldsymbol{F}",

          bG: "\\boldsymbol{G}",

          bH: "\\boldsymbol{H}",

          bI: "\\boldsymbol{I}",

          bJ: "\\boldsymbol{J}",

          bK: "\\boldsymbol{K}",

          bL: "\\boldsymbol{L}",

          bM: "\\boldsymbol{M}",

          bN: "\\boldsymbol{N}",

          bP: "\\boldsymbol{P}",

          bQ: "\\boldsymbol{Q}",

          bR: "\\boldsymbol{R}",

          bS: "\\boldsymbol{S}",

          bT: "\\boldsymbol{T}",

          bU: "\\boldsymbol{U}",

          bV: "\\boldsymbol{V}",

          bW: "\\boldsymbol{W}",

          bX: "\\boldsymbol{X}",

          bY: "\\boldsymbol{Y}",

          bZ: "\\boldsymbol{Z}",

          ba: "\\boldsymbol{a}",

          bb: "\\boldsymbol{b}",

          bc: "\\boldsymbol{c}",

          bd: "\\boldsymbol{d}",

          be: "\\boldsymbol{e}",

          bg: "\\boldsymbol{g}",

          bh: "\\boldsymbol{h}",

          bi: "\\boldsymbol{\\imath}",

          bm: "\\boldsymbol{m}",

          bp: "\\boldsymbol{p}",

          bq: "\\boldsymbol{q}",

          br: "\\boldsymbol{r}",

          bs: "\\boldsymbol{s}",

          bt: "\\boldsymbol{t}",

          bu: "\\boldsymbol{u}",

          bv: "\\boldsymbol{v}",

          bw: "\\boldsymbol{w}",

          bx: "\\boldsymbol{x}",

          by: "\\boldsymbol{y}",

  

          Acal: "\\mathcal{A}",

          Bcal: "\\mathcal{B}",

          Ccal: "\\mathcal{C}",

          Dcal: "\\mathcal{D}",

          Ecal: "\\mathcal{E}",

          Fcal: "\\mathcal{F}",

          Gcal: "\\mathcal{G}",

          Hcal: "\\mathcal{H}",

          Ical: "\\mathcal{I}",

          Jcal: "\\mathcal{J}",

          Kcal: "\\mathcal{K}",

          Lcal: "\\mathcal{L}",

          Mcal: "\\mathcal{M}",

          Ncal: "\\mathcal{N}",

          Ocal: "\\mathcal{O}",

          Pcal: "\\mathcal{P}",

          Qcal: "\\mathcal{Q}",

          Rcal: "\\mathcal{R}",

          Scal: "\\mathcal{S}",

          Tcal: "\\mathcal{T}",

          Ucal: "\\mathcal{U}",

          Vcal: "\\mathcal{V}",

          Wcal: "\\mathcal{W}",

          Xcal: "\\mathcal{X}",

          Ycal: "\\mathcal{Y}",

          Zcal: "\\mathcal{Z}",

  

          A: "\\mathbb{A}",

          B: "\\mathbb{B}",

          C: "\\mathbb{C}",

          D: "\\mathbb{D}",

          E: "\\mathbb{E}",

          F: "\\mathbb{F}",

          G: "\\mathbb{G}",

          H: "\\mathbb{H}",

          I: "\\mathbb{I}",

          J: "\\mathbb{J}",

          K: "\\mathbb{K}",

          L: "\\mathbb{L}",

          M: "\\mathbb{M}",

          N: "\\mathbb{N}",

          O: "\\mathbb{O}",

          P: "\\mathbb{P}",

          Q: "\\mathbb{Q}",

          R: "\\mathbb{R}",

          S: "\\mathbb{S}",

          T: "\\mathbb{T}",

          U: "\\mathbb{U}",

          V: "\\mathbb{V}",

          W: "\\mathbb{W}",

          X: "\\mathbb{X}",

          Y: "\\mathbb{Y}",

          Z: "\\mathbb{Z}",

  

          bAlpha: "\\boldsymbol{\\Alpha}",

          bBeta: "\\boldsymbol{\\beta}",

          bDelta: "\\boldsymbol{\\delta}",

          bEta: "\\boldsymbol{\\eta}",

          bGamma: "\\boldsymbol{\\Gamma}",

          bLambda: "\\boldsymbol{\\Lambda}",

          bOmega: "\\boldsymbol{\\Omega}",

          bPhi: "\\boldsymbol{\\Phi}",

          bPi: "\\boldsymbol{\\Pi}",

          bPsi: "\\boldsymbol{\\Psi}",

          bSigma: "\\boldsymbol{\\Sigma}",

          bTau: "\\boldsymbol{\\tau}",

          bXi: "\\boldsymbol{\\Xi}",

          bbeta: "\\boldsymbol{\\beta}",

          bdelta: "\\boldsymbol{\\delta}",

          blambda: "\\boldsymbol{\\lambda}",

          bmu: "\\boldsymbol{\\mu}",

          bphi: "\\boldsymbol{\\phi}",

          bpi: "\\boldsymbol{\\pi}",

          bpsi: "\\boldsymbol{\\psi}",

          brho: "\\boldsymbol{\\rho}",

          balpha: "\\boldsymbol{\\alpha}",

          bsigma: "\\boldsymbol{\\sigma}",

          btau: "\\boldsymbol{\\tau}",

          bxi: "\\boldsymbol{\\xi}",

          bEta: "\\boldsymbol{\\eta}",

          bPhi: "\\boldsymbol{\\Phi}",

          bPi: "\\boldsymbol{\\Pi}",

          bPsi: "\\boldsymbol{\\Psi}",

          bXi: "\\boldsymbol{\\Xi}",

          blambda: "\\boldsymbol{\\lambda}",

          bmu: "\\boldsymbol{\\mu}",

          bphi: "\\boldsymbol{\\phi}",

          bpi: "\\boldsymbol{\\pi}",

          bpsi: "\\boldsymbol{\\psi}",

          brho: "\\boldsymbol{\\rho}",

          bsigma: "\\boldsymbol{\\sigma}",

          btheta: "\\boldsymbol{\\theta}",

          bgamma: "\\boldsymbol{\\gamma}",  

          

          curl: ["\\left\\lbrace#1\\right\\rbrace", 1],

          floor: ["\\left\\lfloor#1\\right\\rfloor", 1],

          ceil: ["\\left\\lceil#1\\right\\rceil", 1],

          abs: ["\\left\\lvert#1\\right\\rvert", 1],

          norm: ["\\left\\lVert#1\\right\\rVert", 1],

  

          avar: "\\mathrm{avar}",

          var: "\\mathrm{var}",

          cov: "\\mathrm{cov}",

  

          argmin: "\\operatorname*{arg\\,min}",

          argmax: "\\operatorname*{arg\\,max}",

          argsup: "\\operatorname*{arg\\,sup}",

          arginf: "\\operatorname*{arg\\,inf}",

        }

      }

    };

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
  
  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
  <meta name="description" content="Panel data event studies: causal analysis, regression interpretation, and applications to Silicon Valley Bank collapse (lecture notes slides).">
<meta property="og:title" content="Event Studies – Advanced Econometrics">
<meta property="og:description" content="Panel data event studies: causal analysis, regression interpretation, and applications to Silicon Valley Bank collapse (lecture notes slides).">
<meta property="og:site_name" content="Advanced Econometrics">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#045D5D" data-footer="" class="quarto-title-block center">
  <h1 class="title">Event Studies</h1>
  <p class="subtitle">Simple Panel Data Approaches with Binary Treatment</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Vladislav Morozov 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Contents</h2>
<ul>
<li class="fragment"><a href="#/introduction" id="/toc-introduction">Introduction</a></li>
<li class="fragment"><a href="#/two-periods" id="/toc-two-periods">Two Periods</a></li>
<li class="fragment"><a href="#/multiple-periods" id="/toc-multiple-periods">Multiple Periods</a></li>
<li class="fragment"><a href="#/empirical-application" id="/toc-empirical-application">Empirical Application</a></li>
<li class="fragment"><a href="#/recap-and-conclusions" id="/toc-recap-and-conclusions">Recap and Conclusions</a></li>
</ul>
</nav>
</section>
<section>
<section id="introduction" class="title-slide slide level2 center" data-background="#00100F">
<h2>Introduction</h2>

</section>
<section id="lecture-info" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Lecture Info</h3>

</section>
<section id="learning-outcomes" class="slide level4">
<h4>Learning Outcomes</h4>
<p>This lecture is about a simple kind of causal studies with panel data — comparing outcomes from before and after treatment</p>
<p><br></p>
<p>By the end, you should be able to</p>
<ul>
<li class="fragment">Write down event study estimators with two or more periods of data</li>
<li class="fragment">Define an appropriate causal framework</li>
<li class="fragment">Prove consistency of event study estimators under an assumption of no trends</li>
</ul>
</section>
<section id="references" class="slide level4">
<h4>References</h4>
<div>
<ul>
<li>Chapter 17 in <span class="citation" data-cites="Huntington-Klein2025EffectIntroductionResearch">Huntington-Klein (<a href="#/references-1" role="doc-biblioref" onclick="">2025</a>)</span>: <a href="https://www.theeffectbook.net/ch-EventStudies.html" class="uri">https://www.theeffectbook.net/ch-EventStudies.html</a></li>
<li><span class="citation" data-cites="MacKinlay1997EventStudiesEconomics">MacKinlay (<a href="#/references-1" role="doc-biblioref" onclick="">1997</a>)</span>, <span class="citation" data-cites="Freyaldenhoven2021VisualizationIdentificationEstimation">Freyaldenhoven et al. (<a href="#/references-1" role="doc-biblioref" onclick="">2021</a>)</span>, <span class="citation" data-cites="Miller2023IntroductoryGuideEvent">Miller (<a href="#/references-1" role="doc-biblioref" onclick="">2023</a>)</span></li>
<li>NBER 2023 Methods Lectures on Linear Panel Event Studies: <a href="https://www.nber.org/conferences/si-2023-methods-lectures-linear-panel-event-studies" class="uri">https://www.nber.org/conferences/si-2023-methods-lectures-linear-panel-event-studies</a></li>
</ul>
</div>
</section>

<section id="empirical-motivation" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Empirical Motivation</h3>

</section>
<section id="sec-event-study-svb-example" class="slide level4">
<h4>Event</h4>
<div class="rounded-box">
<p><em>March 10, 2023</em>: third-largest bank failure in the US: the Silicon Valley Bank (SVB) collapses</p>
</div>
<p><br></p>
<ul>
<li class="fragment">Bank collapses are painful for depositors and creditors</li>
<li class="fragment">Collapses also raise fears of broader financial contagion — danger to other financial institutions</li>
</ul>
</section>
<section id="empirical-question" class="slide level4 scrollable">
<h4>Empirical Question</h4>
<div class="rounded-box">
<p>How did the collapse of the SVB affect stock prices of other US financial institutions in the next 10 days?</p>
</div>
<ul>
<li class="fragment">Causal question: comparing prices after collapse with prices without collapse</li>
<li class="fragment">How to do this comparison? What assumptions do we need?</li>
</ul>
<<<<<<< HEAD
<div id="1cd5e833" class="cell" data-execution_count="2">
=======
<div id="461fc51f" class="cell" data-execution_count="2">
>>>>>>> block/panel
<details class="code-fold">
<summary>Expand for list of institutions of interest</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a>tickers <span class="op">=</span> [</span>
<span id="cb1-2"><a></a>    <span class="st">"ALLY"</span>,  <span class="co"># Ally Financial Inc.</span></span>
<span id="cb1-3"><a></a>    <span class="st">"AMTB"</span>,  <span class="co"># Amerant Bancorp Inc.</span></span>
<span id="cb1-4"><a></a>    <span class="st">"ABCB"</span>,  <span class="co"># Ameris Bancorp</span></span>
<span id="cb1-5"><a></a>    <span class="st">"ASB"</span>,   <span class="co"># Associated Banc-Corp</span></span>
<span id="cb1-6"><a></a>    <span class="st">"AUB"</span>,   <span class="co"># Atlantic Union Bankshares Corporation</span></span>
<span id="cb1-7"><a></a>    <span class="st">"AX"</span>,    <span class="co"># Axos Financial Inc.</span></span>
<span id="cb1-8"><a></a>    <span class="st">"BANC"</span>,  <span class="co"># Banc of California Inc.</span></span>
<span id="cb1-9"><a></a>    <span class="st">"BK"</span>,    <span class="co"># Bank of New York Mellon Corporation</span></span>
<span id="cb1-10"><a></a>    <span class="st">"BAC"</span>,   <span class="co"># Bank of America Corporation</span></span>
<span id="cb1-11"><a></a>    <span class="st">"BOH"</span>,   <span class="co"># Bank of Hawaii Corporation</span></span>
<span id="cb1-12"><a></a>    <span class="st">"BKU"</span>,   <span class="co"># BankUnited Inc.</span></span>
<span id="cb1-13"><a></a>    <span class="st">"BHB"</span>,   <span class="co"># Bar Harbor Bankshares Inc.</span></span>
<span id="cb1-14"><a></a>    <span class="st">"BHLB"</span>,  <span class="co"># Berkshire Hills Bancorp Inc.</span></span>
<span id="cb1-15"><a></a>    <span class="st">"BRBS"</span>,  <span class="co"># Blue Ridge Bankshares Inc.</span></span>
<span id="cb1-16"><a></a>    <span class="st">"CADE"</span>,  <span class="co"># Cadence Bank</span></span>
<span id="cb1-17"><a></a>    <span class="st">"COF"</span>,   <span class="co"># Capital One Financial Corporation</span></span>
<span id="cb1-18"><a></a>    <span class="st">"C"</span>,     <span class="co"># Citigroup Inc.</span></span>
<span id="cb1-19"><a></a>    <span class="st">"CFG"</span>,   <span class="co"># Citizens Financial Group Inc.</span></span>
<span id="cb1-20"><a></a>    <span class="st">"CMA"</span>,   <span class="co"># Comerica Incorporated</span></span>
<span id="cb1-21"><a></a>    <span class="st">"CFR"</span>,   <span class="co"># Cullen/Frost Bankers Inc. </span></span>
<span id="cb1-22"><a></a>    <span class="st">"FNB"</span>,   <span class="co"># F.N.B. Corporation</span></span>
<span id="cb1-23"><a></a>    <span class="st">"FBK"</span>,   <span class="co"># FB Financial Corporation</span></span>
<span id="cb1-24"><a></a>    <span class="st">"FITB"</span>,  <span class="co"># Fifth Third Bancorp</span></span>
<span id="cb1-25"><a></a>    <span class="st">"HBAN"</span>,  <span class="co"># Huntington Bancshares Incorporated</span></span>
<span id="cb1-26"><a></a>    <span class="st">"KEY"</span>,   <span class="co"># KeyCorp</span></span>
<span id="cb1-27"><a></a>    <span class="st">"MTB"</span>,   <span class="co"># M&amp;T Bank Corporation</span></span>
<span id="cb1-28"><a></a>    <span class="st">"PNC"</span>,   <span class="co"># PNC Financial Services Group Inc.</span></span>
<span id="cb1-29"><a></a>    <span class="st">"RF"</span>,    <span class="co"># Regions Financial Corporation</span></span>
<span id="cb1-30"><a></a>    <span class="st">"STT"</span>,   <span class="co"># State Street Corporation</span></span>
<span id="cb1-31"><a></a>    <span class="st">"SYF"</span>,   <span class="co"># Synchrony Financial</span></span>
<span id="cb1-32"><a></a>    <span class="st">"USB"</span>,   <span class="co"># U.S. Bancorp</span></span>
<span id="cb1-33"><a></a>    <span class="st">"WFC"</span>,   <span class="co"># Wells Fargo &amp; Company</span></span>
<span id="cb1-34"><a></a>    <span class="st">"SCHW"</span>,  <span class="co"># Charles Schwab Corporation</span></span>
<span id="cb1-35"><a></a>    <span class="st">"AXP"</span>,   <span class="co"># American Express Company</span></span>
<span id="cb1-36"><a></a>    <span class="st">"DFS"</span>,   <span class="co"># Discover Financial Services</span></span>
<span id="cb1-37"><a></a>    <span class="st">"NTB"</span>,   <span class="co"># Bank of N.T. Butterfield &amp; Son Limited</span></span>
<span id="cb1-38"><a></a>    <span class="st">"EWBC"</span>,  <span class="co"># East West Bancorp Inc.</span></span>
<span id="cb1-39"><a></a>    <span class="st">"WAL"</span>,   <span class="co"># Western Alliance Bancorporation</span></span>
<span id="cb1-40"><a></a>    <span class="st">"SSB"</span>,   <span class="co"># SouthState Corporation</span></span>
<span id="cb1-41"><a></a>    <span class="st">"WBS"</span>,   <span class="co"># Webster Financial Corporation</span></span>
<span id="cb1-42"><a></a>    <span class="st">"FHN"</span>,   <span class="co"># First Horizon Corporation</span></span>
<span id="cb1-43"><a></a>    <span class="st">"PNFP"</span>,  <span class="co"># Pinnacle Financial Partners Inc.</span></span>
<span id="cb1-44"><a></a>    <span class="st">"HOMB"</span>,  <span class="co"># Home BancShares Inc.</span></span>
<span id="cb1-45"><a></a>    <span class="st">"HTH"</span>,   <span class="co"># Hilltop Holdings Inc.</span></span>
<span id="cb1-46"><a></a>    <span class="st">"GBCI"</span>,  <span class="co"># Glacier Bancorp Inc.</span></span>
<span id="cb1-47"><a></a>    <span class="st">"BOKF"</span>,  <span class="co"># BOK Financial Corporation</span></span>
<span id="cb1-48"><a></a>    <span class="st">"ZION"</span>,  <span class="co"># Zions Bancorporation</span></span>
<span id="cb1-49"><a></a>    <span class="st">"TCBI"</span>,  <span class="co"># Texas Capital Bancshares Inc.</span></span>
<span id="cb1-50"><a></a>    <span class="st">"CIVB"</span>,  <span class="co"># Civista Bancshares Inc.</span></span>
<span id="cb1-51"><a></a>    <span class="st">"CFFI"</span>,  <span class="co"># C&amp;F Financial Corporation</span></span>
<span id="cb1-52"><a></a>    <span class="st">"BANF"</span>,  <span class="co"># BancFirst Corporation</span></span>
<span id="cb1-53"><a></a>    <span class="st">"FULT"</span>,  <span class="co"># Fulton Financial Corporation</span></span>
<span id="cb1-54"><a></a>    <span class="st">"ONB"</span>,   <span class="co"># Old National Bancorp</span></span>
<span id="cb1-55"><a></a>    <span class="st">"PB"</span>,    <span class="co"># Prosperity Bancshares Inc.</span></span>
<span id="cb1-56"><a></a>    <span class="st">"UBSI"</span>,  <span class="co"># United Bankshares Inc.</span></span>
<span id="cb1-57"><a></a>    <span class="st">"VLY"</span>,   <span class="co"># Valley National Bancorp</span></span>
<span id="cb1-58"><a></a>    <span class="st">"TRMK"</span>,  <span class="co"># Trustmark Corporation </span></span>
<span id="cb1-59"><a></a>    <span class="st">"CASH"</span>,  <span class="co"># Meta Financial Group Inc.</span></span>
<span id="cb1-60"><a></a>    <span class="st">"CUBI"</span>,  <span class="co"># Customers Bancorp Inc.</span></span>
<span id="cb1-61"><a></a>    <span class="st">"CFFN"</span>,  <span class="co"># Capitol Federal Financial Inc.</span></span>
<span id="cb1-62"><a></a>    <span class="st">"FFIN"</span>,  <span class="co"># First Financial Bankshares Inc. </span></span>
<span id="cb1-63"><a></a>    <span class="st">"SFBS"</span>,  <span class="co"># ServisFirst Bancshares Inc.</span></span>
<span id="cb1-64"><a></a>    <span class="st">"TBBK"</span>,  <span class="co"># The Bancorp Inc. </span></span>
<span id="cb1-65"><a></a>    <span class="st">"WSBC"</span>,  <span class="co"># WesBanco Inc.</span></span>
<span id="cb1-66"><a></a>    <span class="st">"WTFC"</span>,  <span class="co"># Wintrust Financial Corporation</span></span>
<span id="cb1-67"><a></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="footer">

</div>
</section>
</section>
<section>
<section id="two-periods" class="title-slide slide level2 center" data-background="#00100F">
<h2>Two Periods</h2>

</section>
<section id="estimator" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Estimator</h3>

</section>
<section id="simple-event-study-setting" class="slide level4">
<h4>Simple Event Study Setting</h4>
<p>Begin with the simplest possible panel setting with binary treatment:</p>
<ul>
<li class="fragment">Two periods with <span class="math inline">\(N\)</span> units:
<ul>
<li class="fragment">No treatment in period 1</li>
<li class="fragment">All units treated in period 2</li>
</ul></li>
<li class="fragment">Data: outcomes <span class="math inline">\((Y_{i1}, Y_{i2})\)</span>.</li>
</ul>
<div class="fragment">
<p>Object of interest: “average effect of treatment”</p>
</div>
</section>
<section id="simple-estimator-average-change" class="slide level4">
<h4>Simple Estimator — Average Change</h4>
<p>Simplest approach: compute average change in <span class="math inline">\(Y_{it}\)</span> across periods <span id="eq-causal-event-studies-naive-panel-contrast"><span class="math display">\[
  \widehat{AE}_{ES} = \dfrac{1}{N}\sum_{i=1}^N (Y_{i2}- Y_{i1}).
   \tag{1}\]</span></span></p>
<p>Estimator (<a href="#/eq-causal-event-studies-naive-panel-contrast" class="quarto-xref">1</a>) — simplest example of <em>event study</em> estimators <span class="citation" data-cites="Freyaldenhoven2021VisualizationIdentificationEstimation Miller2023IntroductoryGuideEvent">(see <a href="#/references-1" role="doc-biblioref" onclick="">Freyaldenhoven et al. 2021</a>; <a href="#/references-1" role="doc-biblioref" onclick="">Miller 2023</a>)</span></p>
</section>
<section id="sec-event-study-example" class="slide level4">
<h4>Example Framework</h4>
<p>Possible empirical framework</p>
<ul>
<li class="fragment">Units <span class="math inline">\(i\)</span>: firms that make phones</li>
<li class="fragment">Outcome <span class="math inline">\(Y_{it}\)</span>: their stock price</li>
<li class="fragment">Periods:
<ol type="1">
<li class="fragment">One week before Apple announces the iPhone</li>
<li class="fragment">One week after the announcement</li>
</ol></li>
</ul>
<div class="fragment">
<p>Effect of interest: change in stock prices due to the announcement of iPhone</p>
</div>
</section>
<section id="what-does--eq-causal-event-studies-naive-panel-contrast-do" class="slide level4">
<h4>What Does (<a href="#/eq-causal-event-studies-naive-panel-contrast" class="quarto-xref">1</a>) Do?</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-limit" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 1 (Asymptotics for <span class="math inline">\(\widehat{AE}_{ES}\)</span>)</strong></span> Let</p>
<div>
<ul>
<li><em>(Cross-sectional random sampling)</em>: <span class="math inline">\((Y_{i1}, Y_{i2})\)</span> be independent and identically distributed (IID)</li>
<li><em>Finite first moments</em>: <span class="math inline">\(\E[\abs{Y_{it}}]&lt;\infty\)</span></li>
</ul>
</div>
<p>Then <span class="math display">\[
\widehat{AE}_{ES} \xrightarrow{p} \E[Y_{i2} - Y_{i1}].
\]</span></p>
</div>
</div>
</section>

<section id="causal-analysis" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Causal Analysis</h3>

</section>
<section id="causal-framework" class="slide level4">
<h4>Causal Framework</h4>
<p>Is <span class="math inline">\(\E[Y_{i2} - Y_{i1}]\)</span> interesting (=causal)?</p>
<div class="fragment">
<div class="callout callout-important no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>Need a causal framework to talk about causal effects!</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>Again work in the familiar potential outcomes framework:</p>
<ul>
<li class="fragment"><span class="math inline">\(Y_{it}^0\)</span> — outcome for <span class="math inline">\(i\)</span> in period <span class="math inline">\(t\)</span> if <em>not treated</em></li>
<li class="fragment"><span class="math inline">\(Y_{i1}^1\)</span> — outcome for <span class="math inline">\(i\)</span> in period <span class="math inline">\(t\)</span> if <em>treated</em></li>
<li class="fragment">Treatment effect for <span class="math inline">\(i\)</span> in <span class="math inline">\(t\)</span>: <span class="math inline">\(Y_{it}^1- Y_{it}^0\)</span></li>
</ul>
</div>
<div class="fragment">
<p>For short, use <span class="math inline">\(Y_{it}^d\)</span> where <span class="math inline">\(d=0, 1\)</span></p>
</div>
</section>
<section id="limit-of-es-estimator-and-causality" class="slide level4">
<h4>Limit of ES Estimator and Causality</h4>
<p>Potential and <em>realized</em> outcomes are connected as <span class="math display">\[
Y_{i2} = Y_{i2}^1, \quad Y_{i1} = Y_{i1}^0.
\]</span></p>
<div class="fragment">
<p>It follows that <span class="math display">\[
\widehat{AE}_{ES} \xrightarrow{p} \E[Y_{i2}^1- Y_{i1}^0].
\]</span></p>
<div class="callout callout-important no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p><span class="math inline">\(\E[Y_{i2}^1- Y_{i1}^0]\)</span> is not necessarily a treatment effect — mixes effect of treatment and effects of time!</p>
</div>
</div>
</div>
</div>
</section>
<section id="example" class="slide level4">
<h4>Example</h4>
<p><a href="#/sec-event-study-example"><span class="button">Context</span></a> Again consider the iPhone example. Then</p>
<ul>
<li class="fragment"><span class="math inline">\(Y_{i2}^1 - Y_{i2}^0\)</span> — treatment effect, change in price <em>because</em> of the iPhone announcement</li>
<li class="fragment"><span class="math inline">\(Y_{i2}^0 - Y_{i1}^0\)</span> — change in a world <em>without</em> iPhone</li>
</ul>
<div class="fragment">
<p><br></p>
<p>Realized difference = combination of both changes <span class="math display">\[
Y_{i2} - Y_{i1} = Y_{i2}^1- Y_{i1}^0 = [Y_{i2}^1- Y_{i2}^0] + [Y_{i2}^0 - Y_{i1}^0]
\]</span></p>
</div>
</section>
<section id="solution-restrict-changes-over-time" class="slide level4">
<h4>Solution: Restrict Changes over Time</h4>
<p>Simple solution: rule out changes over time</p>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<p><strong>Assumption</strong>: no variation in potential outcomes <span class="math display">\[
Y_{i2}^d= Y_{i1}^d, \quad d=0, 1
\]</span></p>
</div>
<p>Then <span class="math inline">\(\widehat{AE}_{ES}\)</span> is estimating a <em>causal</em> parameter — average effects: <span class="math display">\[
\begin{aligned}
\widehat{AE}_{ES} &amp; \xrightarrow{p} \E[Y_{i1}^1- Y_{i1}^0]  =  \E[Y_{i2}^1- Y_{i2}^0]
\end{aligned}
\]</span></p>
</section>
<section id="relaxing-time-invariance-no-trends" class="slide level4">
<h4>Relaxing Time Invariance: No Trends</h4>
<p>Time invariance very strict. Why use it if we only work with averages?</p>
<div class="fragment">
<p>Weaker assumption:</p>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<p><strong>Assumption</strong> (<em>no trends</em>):<br>
<span class="math display">\[
\E[Y_{i2}^d] = \E[Y_{i1}^d], \quad d=0, 1
\]</span></p>
</div>
<p>Allows random variation in potential outcomes between times</p>
</div>
</section>
<section id="summary-so-far" class="slide level4">
<h4>Summary so Far</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-no-trends" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 2 (Causal asymptotics for <span class="math inline">\(\widehat{AE}_{ES}\)</span>)</strong></span> Let</p>
<div>
<ul>
<li>Assumptions of <a href="#/prp-event-study-limit" class="quarto-xref">Proposition&nbsp;1</a> hold</li>
<li>Assumption of no trends holds</li>
</ul>
</div>
<p>Then <span class="math inline">\(\widehat{AE}_{ES}\)</span> consistent for causal parameters: <span class="math display">\[
\widehat{AE}_{ES} \xrightarrow{p} \E[Y_{i1}^1- Y_{i1}^0]  =  \E[Y_{i2}^1- Y_{i2}^0]
\]</span></p>
</div>
</div>
</section>

<section id="regression-interpretation" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Regression Interpretation</h3>

</section>
<section id="regression-setting" class="slide level4">
<h4>Regression Setting</h4>
<p>Can also connect <span class="math inline">\(\widehat{AE}_{ES}\)</span> and OLS</p>
<div class="fragment">
<p>Consider regressing <span class="math inline">\(Y_{it}\)</span> on <span class="math inline">\((1, D_{it})\)</span> where <span id="eq-event-study-simple-regression"><span class="math display">\[
\begin{aligned}
% Y_{it} &amp; = \beta_0 + \beta_1 D_{it} + U_{it}, \\
D_{it} &amp; = \begin{cases}
1, &amp; t= 1 \\
0, &amp; t =0
\end{cases}
\end{aligned}
\tag{2}\]</span></span> and where we simply treat <span class="math inline">\((Y_{i1}, D_{i1})\)</span> and <span class="math inline">\((Y_{i2}, D_{i2})\)</span> as separate observations</p>
</div>
</section>
<section id="event-studies-and-ols" class="slide level4">
<h4>Event Studies and OLS</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-no-trends" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 3 (<span class="math inline">\(\widehat{AE}_{ES}\)</span> is OLS)</strong></span> For <span class="math inline">\(\beta_1\)</span> of regression (<a href="#/eq-event-study-simple-regression" class="quarto-xref">2</a>) <span class="math display">\[
\widehat{AE}_{ES} = \hat{\beta}_1,
\]</span> where <span class="math inline">\(\hat{\beta}_1\)</span> is the estimator of the coefficient on <span class="math inline">\(D_{it}\)</span></p>
</div>
</div>
<p>Can use all results developed for OLS for <span class="math inline">\(\widehat{AE}_{ES}\)</span></p>
</section>
<section id="event-study-and-regression-i" class="slide level4">
<h4>Event Study and Regression I</h4>
<p>A way to think about regression in causal settings:</p>
<ul>
<li class="fragment">Write down the regression in terms of parameters of interest: e.g.&nbsp;let <span class="math display">\[
\begin{aligned}
Y_{it} &amp; = \beta_0 + \beta_1 D_{it} + U_{it},
\\
\beta_0 &amp; = \E[Y_{i1}^0], \quad
\beta_1  =  \E[Y_{i2}^1- Y_{i2}^0]
\end{aligned}
\]</span></li>
<li class="fragment">Connect regression to potential outcomes: <em>what is <span class="math inline">\(U_{it}\)</span> in terms of potential outcomes? (exercise)</em></li>
</ul>
</section>
<section id="event-study-and-regression-ii" class="slide level4">
<h4>Event Study and Regression II</h4>
<p>Let <span class="math inline">\(\bX_{it} = (1, D_{it})'\)</span>. Then</p>
<ul>
<li class="fragment">By properties of OLS know that OLS is consistent for <span class="math inline">\(\bbeta = (\beta_0, \beta_1)\)</span> if
<ul>
<li class="fragment"><span class="math inline">\(\E[\bX_{it}U_{it}] =0\)</span><br>
</li>
<li class="fragment"><span class="math inline">\(\E[\bX_{it}\bX_{it}']\)</span> invertible</li>
</ul></li>
<li class="fragment">So just need to check if this <span class="math inline">\(U_{it}\)</span> satisfies <span class="math inline">\(\E[\bX_{it}U_{it}] =0\)</span></li>
<li class="fragment">If yes, OLS can estimate average effects of interest</li>
</ul>
<div class="fragment">
<div class="callout callout-important no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>Remember: the OLS “model” and the underlying causal model are separate things! Here the causal model is “nonparametric”</p>
</div>
</div>
</div>
<div class="footer">

</div>
</div>
</section>
</section>
<section>
<section id="multiple-periods" class="title-slide slide level2 center" data-background="#00100F">
<h2>Multiple Periods</h2>

</section>
<section id="estimation-and-causal-framework" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Estimation and Causal Framework</h3>

</section>
<section id="multiple-period-framework" class="slide level4">
<h4>Multiple Period Framework</h4>
<ul>
<li class="fragment">Often have more than 2 periods of data</li>
<li class="fragment">Want to use that data</li>
</ul>
<div class="fragment">
<p>New framework:</p>
<ul>
<li class="fragment"><span class="math inline">\(T\)</span> periods in total</li>
<li class="fragment">Treatment starts in period <span class="math inline">\(t_0\)</span></li>
<li class="fragment">We see <span class="math inline">\(Y_{it}^0\)</span> for <span class="math inline">\(t&lt;t_0\)</span> and <span class="math inline">\(Y_{it}^1\)</span> for <span class="math inline">\(t\geq t_0\)</span></li>
</ul>
</div>
</section>
<section id="expanded-regression" class="slide level4">
<h4>Expanded Regression</h4>
<p>New variables for treatment: <span class="math display">\[\small
D_{it, \tau} = \begin{cases}
1, &amp; t= \tau, \\
0, &amp; t\neq \tau
\end{cases}
\]</span></p>
<div class="fragment">
<p>Can try similar regression: <span id="eq-event-studies-long-regression"><span class="math display">\[\small
Y_{it} = \beta_0 +  \sum_{\tau = t_0}^{T} \beta_\tau D_{it, \tau} + u_{it}
\tag{3}\]</span></span> Let <span class="math inline">\(\hat{\bbeta}=(\hat{\beta}_0, \hat{\beta}_{t_0}, \dots, \hat{\beta}_{T}\)</span>) be the OLS estimator</p>
</div>
</section>
<section id="ols-estimator-expression" class="slide level4">
<h4>OLS Estimator Expression</h4>
<p>Fairly easy to show that <span class="math display">\[
\begin{aligned}
\hat{\beta}_{\tau} &amp; = \dfrac{1}{N} \sum_{i=1}^N Y_{i\tau} - \dfrac{1}{N(t_0-1)} \sum_{i=1}^N\left[ Y_{i1} + \dots + Y_{it_0-1} \right] \\
&amp; \xrightarrow{p} \E\left[Y_{i\tau}^1  - \dfrac{1}{t_0-1}(Y_{i1}^0+ \dots + Y_{it_0-1}^0) \right]
\end{aligned}
\]</span> More general version of the simple estimator of before</p>
</section>
<section id="dynamic-treatment-effects" class="slide level4">
<h4>Dynamic Treatment Effects?</h4>
<p>If <span class="math inline">\(\beta_{\tau}\)</span> — average effect in period <span class="math inline">\(\tau\)</span>, then model (<a href="#/eq-event-studies-long-regression" class="quarto-xref">3</a>) seems to allow for <em>dynamic</em> effects</p>
<div class="fragment">
<p><br></p>
<p>Dynamic effects <span class="highlight">realistic</span>: effect of treatment may change over time. Example: impact of job training on earnings:</p>
<ul>
<li class="fragment">Disappearing: you forget the training over time</li>
<li class="fragment">Increasing: job training lets you jump to a higher position and gain experience quicker for the rest of your life</li>
</ul>
</div>
</section>
<section id="no-trends-rule-out-dynamics" class="slide level4">
<h4>No Trends Rule Out Dynamics</h4>
<p>Suppose that the <em>no trends</em> assumption holds <span class="math display">\[
\begin{aligned}
&amp; \E\left[Y_{i\tau}^1  - \dfrac{1}{t_0-1}(Y_{i1}^0+ \dots + Y_{it_0-1}^0) \right]  = \E[Y_{it}^1 - Y_{it}^0]
\end{aligned}
\]</span> The right hand side does <span class="highlight">not</span> depend on <span class="math inline">\(t\)</span></p>
<div class="fragment">
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<p>No dynamic treatment effects under no trends!</p>
</div>
<p><span class="highlight">Bad</span>, since we want to allow for dynamics</p>
</div>
</section>
<section id="relaxing-no-trends-assumption" class="slide level4">
<h4>Relaxing No Trends Assumption</h4>
<p>Can relax no trends to only affect <em>one</em> of the potential outcomes — makes more sense to restrict the untreated outcome (why?)</p>
<p><br></p>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<p><strong>Assumption</strong> (<em>no trends in the baseline</em>): <span class="math inline">\(\E[Y_{it}^0]\)</span> does not depend on <span class="math inline">\(t\)</span></p>
</div>
</section>
<section id="recovering-dynamic-average-treatment-effects" class="slide level4">
<h4>Recovering Dynamic Average Treatment Effects</h4>
<p>Under assumption of no trends in the baseline: <span class="math display">\[
\begin{aligned}
&amp; \E\left[Y_{i\tau}^1  - \dfrac{1}{t_01}(Y_{i1}^0+ \dots + Y_{it_0-1}^0) \right]  = \E[Y_{i \tau}^1 - Y_{i\tau}^0]
\end{aligned}
\]</span></p>
<p><br></p>
<p>Right hand side is average effect in period <span class="math inline">\(\tau\)</span></p>
</section>

<section id="asymptotic-properties" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Asymptotic Properties</h3>

</section>
<section id="consistency-in-the-multivariate-case" class="slide level4">
<h4>Consistency in the Multivariate Case</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-no-trends-multivariate" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 4</strong></span> Let</p>
<div>
<ul>
<li>Assumptions of <a href="#/prp-event-study-limit" class="quarto-xref">Proposition&nbsp;1</a> hold</li>
<li>No trends in the baseline assumption hold</li>
</ul>
</div>
<p>Then <span class="math inline">\(\hat{\beta}_{\tau}\)</span> consistently estimates the average treatment effect in period <span class="math inline">\(\tau\)</span> given by <span class="math inline">\(\E[Y_{i \tau}^1 - Y_{i\tau}^0]\)</span>.</p>
</div>
</div>
</section>
<section id="unbiasedness-of-ols" class="slide level4">
<h4>Unbiasedness of OLS</h4>
<p>Moreover, under no trends in the baseline <span class="math display">\[
\E[\hat{\beta}_{\tau}] = \E[Y_{i \tau}^1 - Y_{i\tau}^0]
\]</span></p>
<p><br></p>
<div class="fragment">
<p>In other words, the OLS estimator is unbiased</p>
</div>
</section>
<section id="asymptotic-distribution" class="slide level4">
<h4>Asymptotic Distribution</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-no-trends-multivariate-distribution" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 5</strong></span> Let</p>
<div>
<ul>
<li>No trends in the baseline assumption hold</li>
<li><span class="math inline">\((Y_{i1}, Y_{i2}, \dots, Y_{iT})\)</span> be IID (over <span class="math inline">\(i\)</span>)</li>
<li><em>Finite second moments</em>: <span class="math inline">\(\E[Y_{it}^2]&lt;\infty\)</span></li>
</ul>
</div>
<p>Then there exists some variance <span class="math inline">\(V\)</span> such that <span class="math display">\[
\sqrt{N}\left( \hat{\beta}_{\tau} - \E[Y_{i \tau}^1 - Y_{i\tau}^0] \right) \Rightarrow N(0, V)
\]</span></p>
</div>
</div>
<!-- #### Asymptotic Variance I

Need variance $V$ to construct confidence intervals for $\E[Y_{i \tau}^1 - Y_{i\tau}^0]$. How to find $V$? Remember the CLT:

. . .

<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">

If $X_1, X_2, \dots$ are IID random variables with $\E[X_i]=\mu$ and $\E[X^2]<\infty$, then
$$
\sqrt{N}\left( \dfrac{1}{N}\sum_{i=1}^N X_i - \mu  \right)\Rightarrow N\left(0, \var(X_i) \right)
$$
Asymptotic variance = variance of $X_i$
</div>
  -->
</section>
<section id="asymptotic-variance" class="slide level4">
<h4>Asymptotic Variance</h4>
<p>Need variance <span class="math inline">\(V\)</span> to construct confidence intervals for <span class="math inline">\(\E[Y_{i \tau}^1 - Y_{i\tau}^0]\)</span>.</p>
<div class="fragment">
<p><span class="math display">\[
\begin{aligned}
\hat{\beta}_{\tau} &amp; = \dfrac{1}{N} \sum_{i=1}^N Z_i\\
Z_i &amp; =  Y_{i\tau} - \dfrac{1}{(t_0-1)}\left[ Y_{i1} + \dots + Y_{it_0-1} \right]
\end{aligned}
\]</span></p>
</div>
<div class="fragment">
<p>From central limit theorem: <span class="math display">\[
V = \var(Z_i)
\]</span></p>
</div>
</section>
<section id="estimator-for-asymptotic-variance" class="slide level4">
<h4>Estimator for Asymptotic Variance</h4>
<p>Can estimate <span class="math inline">\(V\)</span> with <span class="math display">\[
\hat{V} = \widehat{\var}(Z_i) = \dfrac{1}{N}\left(Z_i - \dfrac{1}{N}\sum_{j=1}^N Z_j \right)^2
\]</span></p>
<div class="fragment">
<p>Estimated standard error of <span class="math inline">\(\hat{\beta}_{\tau}\)</span>: <span class="math display">\[
\widehat{se}(\hat{\beta}_{\tau}) = \sqrt{ \dfrac{\hat{V}}{N} }
\]</span></p>
</div>
</section>
<section id="inference-on-average-effects-i" class="slide level4">
<h4>Inference on Average Effects I</h4>
<p>Can now construct confidence intervals and hypothesis tests about <span class="math inline">\(\E[Y_{i \tau}^1 - Y_{i\tau}^0]\)</span>. E.g. an asymptotic (1-)% confidence interval: <span class="math display">\[
\widehat{CI}_{95\%} = \left[\hat{\beta}^{OLS}_{\tau} - z_{1-\alpha/2}\widehat{se}(\hat{\beta}_{\tau}), \hat{\beta}^{OLS}_{\tau} + z_{1-\alpha/2}\widehat{se}(\hat{\beta}_{\tau}) \right]
\]</span> where the critical values <span class="math inline">\(z_{1-\alpha/2}\)</span> come from the standard normal distribution <span class="math display">\[
z_{1-\alpha/2}= \Phi^{-1}\left(1 - \dfrac{\alpha}{2} \right)
\]</span></p>
</section>
<section id="inference-on-average-effects-ii" class="slide level4">
<h4>Inference on Average Effects II</h4>
<p>But what if we want to set the <em>joint</em> hypothesis <span class="math display">\[
H_0: \beta_{\tau} = 0, \quad \tau = t_0, \dots, T
\]</span></p>
<div class="fragment">
<ul>
<li class="fragment">This <span class="math inline">\(H_0\)</span> is a hypothesis above a <em>vector</em> of effects</li>
<li class="fragment">To write down a Wald test we need the <em>joint</em> asymptotic distribution of <span class="math inline">\(\hat{\bbeta}\)</span></li>
</ul>
</div>
</section>
<section id="joint-asymptotic-distribution" class="slide level4">
<h4>Joint Asymptotic Distribution</h4>
<div style="border: 2px solid #ccc; padding: 9px; border-radius: 15px; margin-bottom: 10px;">
<div id="prp-event-study-joint-limit-distribution" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 6 (Joint Asymptotics for Estimated Effects)</strong></span> Let</p>
<div>
<ul>
<li>Assumption of no trends in the baseline hold</li>
<li><span class="math inline">\((Y_{i1}, Y_{i2}, \dots, Y_{iT})\)</span> be IID (over <span class="math inline">\(i\)</span>) with finite second moments</li>
</ul>
</div>
<p>Then<br>
<span class="math display">\[ \small
\sqrt{N}(\hat{\bbeta} -\bbeta) \Rightarrow N(0, \avar(\hat{\bbeta}))
\]</span></p>
</div>
</div>
</section>
<section id="joint-inference-on-average-effects-wald-test" class="slide level4">
<h4>Joint Inference on Average Effects: Wald Test</h4>
<p>Can use <a href="#/prp-event-study-joint-limit-distribution" class="quarto-xref">Proposition&nbsp;6</a> to create a Wald test:</p>
<ul>
<li class="fragment"><p>Write <span class="math inline">\(H_0\)</span> as <span class="math inline">\(H_0: \bR\bbeta = \bq\)</span> for <span class="math display">\[ \small
\bR = \begin{pmatrix}
\mathbf{0} &amp; \bI_{T-t_0+1}
\end{pmatrix}, \quad \bq = \mathbf{0}
\]</span></p></li>
<li class="fragment"><p>Write down Wald statistic: <span class="math display">\[ \small
W = N(\bR\hat{\bbeta}-\bq)'(\bR\widehat{\avar}(\hat{\bbeta})\bR')^{-1}(\bR\hat{\bbeta}-\bq)
\]</span></p></li>
<li class="fragment"><p>Compare to <span class="math inline">\((1-\alpha)\)</span>th quantile of <span class="math inline">\(\chi^2_{T-t_0+1}\)</span> distribution</p></li>
</ul>
</section>
</section>
<section>
<section id="empirical-application" class="title-slide slide level2 center" data-background="#00100F">
<h2>Empirical Application</h2>

</section>
<section id="formalizing-the-application" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Formalizing the Application</h3>

</section>
<section id="back-to-empirical-application" class="slide level4">
<h4>Back to Empirical Application</h4>
<p>Now let’s answer our empirical question — impact of the SVB collapse on stock returns of US financial institutions <a href="#/sec-event-study-svb-example"><span class="button">Context</span></a></p>
<p><br></p>
<div class="fragment">
<p>We need</p>
<ul>
<li class="fragment">Outcome variables (which returns?)</li>
<li class="fragment">Time context <span class="math inline">\(t\)</span></li>
<li class="fragment">How to define the treatment</li>
</ul>
</div>
</section>
<section id="some-finance-background-abnormal-returns" class="slide level4">
<h4>Some Finance Background: Abnormal Returns</h4>
<p>In finance, usually work with <span class="highlight">abnormal returns <span class="math inline">\(AR_{it}\)</span></span> <span class="citation" data-cites="MacKinlay1997EventStudiesEconomics">(<a href="#/references-1" role="doc-biblioref" onclick="">MacKinlay 1997</a>)</span></p>
<p><br></p>
<ul>
<li class="fragment">Each stock <span class="math inline">\(i\)</span> assumed to have a “normal” or “expected” return <span class="math inline">\(ER_{it}\)</span> given market conditions on day <span class="math inline">\(t\)</span> — everything “expected” by the market</li>
<li class="fragment"><span class="math inline">\(AR_{it}\)</span> — differences between actual return <span class="math inline">\(R_{it}\)</span> and <span class="math inline">\(ER_{it}\)</span>: <span class="math display">\[ \small
R_{it} = ER_{it} + AR_{it}
\]</span></li>
</ul>
</section>
<section id="interest-impact-on-abnormal-returns" class="slide level4">
<h4>Interest: Impact on Abnormal Returns</h4>
<p>Outcome of interest: <span class="math inline">\(AR_{it}\)</span></p>
<p><br></p>
<div class="fragment">
<table class="table-striped table-hover table-bordered caption-top">
<caption>Potential outcomes</caption>
<colgroup>
<col style="width: 45%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(d=0\)</span></th>
<th style="text-align: center;"><span class="math inline">\(d=1\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Only idiosyncratic day-to-day shifts</td>
<td style="text-align: center;">Impact of SVB collapse + idiosyncratic movements</td>
</tr>
</tbody>
</table>
<p><br></p>
<div class="rounded-box">
<p>Assume that <span class="math inline">\(\E[AR_{it}^0] = 0\)</span> and <span class="math inline">\(AR_{it}^0\)</span> uncorrelated with broader market characteristics</p>
</div>
<div class="footer">

</div>
</div>
</section>
<section id="computing-expected-and-abnormal-returns" class="slide level4">
<h4>Computing Expected and Abnormal Returns</h4>
<p>Expected returns usually given by some model:</p>
<ul>
<li class="fragment">Simple mean model: let <span class="math inline">\(R_{it}\)</span> be return of asset <span class="math inline">\(i\)</span> on <span class="math inline">\(t\)</span>. Expected return <span class="math inline">\(ER_{it} = \E[R_{it}]\)</span></li>
<li class="fragment">Factor models: <span class="math display">\[\small
ER_{it} = f_i\left( \text{Some market characteristics on }t \right)
\]</span> Example: <span class="math inline">\(ER_{it} = \bbeta_i'\bx_{t}\)</span> where <span class="math inline">\(\bx_{t}\)</span> includes market return on <span class="math inline">\(t\)</span> (CAPM), or also small minus big, high minus low (Fama-French 3 factor)</li>
</ul>
<div class="footer">
<p>Check out <span class="citation" data-cites="Fama2014TwoPillarsAsset">Fama (<a href="#/references-1" role="doc-biblioref" onclick="">2014</a>)</span> Nobel Prize lecture for some background and history</p>
</div>
</section>
<section id="estimating-model-parameters" class="slide level4">
<h4>Estimating Model Parameters</h4>
<ul>
<li class="fragment">Can compute <span class="math inline">\(ER_{it}\)</span> (and <span class="math inline">\(AR_{it}\)</span>) if know model parameters</li>
<li class="fragment">But how to compute parameters?</li>
</ul>
<div class="fragment">
<p><br></p>
<p>Select estimation window with <span class="math inline">\(D_{it}=0\)</span>. Then <span class="math display">\[
R_{it} = \bbeta_i'\bx_t + AR_{it}^0, \quad \E[AR_{it}^0\bx_t] =0
\]</span> Can consistently estimate <span class="math inline">\(\bbeta_i\)</span> by regressing <span class="math inline">\(R_{it}\)</span> on <span class="math inline">\(\bx_t\)</span> (why — measurement error in dependent variable)</p>
</div>
</section>
<section id="computing-abnormal-returns" class="slide level4">
<h4>Computing Abnormal Returns</h4>
<p>Work with estimated abnormal returns: <span class="math display">\[
\widehat{AR}_{it} = R_{it} - \widehat{ER}_{it} = R_{it} - \hat{\bbeta}'\bx_t
\]</span></p>
<p><br></p>
<p>One issue: <span class="math inline">\(\widehat{AR}_{it}\)</span> has measurement error. But</p>
<ul>
<li class="fragment">Measurement error in dependent variable not a problem if uncorrelated with covariates</li>
<li class="fragment">If estimation window for <span class="math inline">\(\hat{\bbeta}\)</span> large, measurement error likely small</li>
</ul>
</section>

<section id="preparing-data" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Preparing Data</h3>

</section>
<section id="define-time-frames" class="slide level4">
<h4>Define Time Frames</h4>
<p>When does treatment turn on? What <span class="math inline">\(T\)</span> to take?</p>
<ul>
<li class="fragment">Key public announcement — March 8, 2023 (our <span class="math inline">\(t_0\)</span>)</li>
<li class="fragment">Look for 10 days around (<span class="math inline">\(T=20\)</span>)</li>
</ul>
<div class="fragment">
<<<<<<< HEAD
<div id="ff925efb" class="cell" data-execution_count="3">
=======
<div id="80302273" class="cell" data-execution_count="3">
>>>>>>> block/panel
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a>event_date <span class="op">=</span> pd.Timestamp(<span class="st">"2023-03-08"</span>)</span>
<span id="cb2-2"><a></a>event_window <span class="op">=</span> pd.Timedelta(days<span class="op">=</span><span class="dv">10</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</div>
<div class="fragment">
<p>For estimation, use long window before SVB collapse:</p>
<<<<<<< HEAD
<div id="90ecb36c" class="cell" data-execution_count="4">
=======
<div id="ada7e277" class="cell" data-execution_count="4">
>>>>>>> block/panel
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a>estimation_window <span class="op">=</span> pd.Timedelta(days<span class="op">=</span><span class="dv">500</span>) </span>
<span id="cb3-2"><a></a>start_date <span class="op">=</span> event_date <span class="op">-</span> event_window <span class="op">-</span> estimation_window </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="obtaining-data" class="slide level4 scrollable">
<h4>Obtaining Data</h4>
<p>Necessary data:</p>
<ul>
<li class="fragment">Returns on tickers of interest</li>
<li class="fragment">Market data for estimating <span class="math inline">\(ER_{it}\)</span> — will use 3-factor Fama-French model</li>
</ul>
<div class="fragment">
<p>Can obtain ticker data from Yahoo Finance directly with <code>yfinance</code> package (abbreviated as <code>yf</code>)</p>
<<<<<<< HEAD
<div id="d11d92ac" class="cell" data-execution_count="5">
=======
<div id="b4cbd4ac" class="cell" data-execution_count="5">
>>>>>>> block/panel
<details class="code-fold">
<summary>Expand for data call and data preparation</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a></a><span class="co"># Download the tickers and rename columns to only retain ticker names</span></span>
<span id="cb4-2"><a></a>stock_data <span class="op">=</span> yf.download(</span>
<span id="cb4-3"><a></a>    tickers, </span>
<span id="cb4-4"><a></a>    start<span class="op">=</span>start_date, </span>
<span id="cb4-5"><a></a>    end<span class="op">=</span>event_date <span class="op">+</span> <span class="dv">4</span><span class="op">*</span>event_window,</span>
<span id="cb4-6"><a></a>    progress<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb4-7"><a></a>)</span>
<span id="cb4-8"><a></a>stock_data <span class="op">=</span> stock_data.iloc[:, <span class="dv">0</span>:<span class="bu">len</span>(tickers)]</span>
<span id="cb4-9"><a></a>stock_data.columns <span class="op">=</span> (</span>
<span id="cb4-10"><a></a>    stock_data.columns.<span class="bu">map</span>(<span class="kw">lambda</span> col: re.sub(<span class="vs">r"[()\s']"</span>, <span class="st">""</span>, col[<span class="dv">1</span>]))</span>
<span id="cb4-11"><a></a>)</span>
<span id="cb4-12"><a></a></span>
<span id="cb4-13"><a></a><span class="co"># Calculate daily returns</span></span>
<span id="cb4-14"><a></a>returns <span class="op">=</span> stock_data.pct_change().dropna()<span class="op">*</span><span class="dv">100</span></span>
<span id="cb4-15"><a></a></span>
<span id="cb4-16"><a></a><span class="co"># Read in FF 3 factor daily data</span></span>
<span id="cb4-17"><a></a>ff_path <span class="op">=</span> Path() <span class="op">/</span> <span class="st">'data'</span> <span class="op">/</span> <span class="st">'fama-french-3.csv'</span></span>
<span id="cb4-18"><a></a>fama_french_data <span class="op">=</span> pd.read_csv(ff_path).iloc[:, :<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb4-19"><a></a><span class="co"># Read the Date column as a date and set it as the index</span></span>
<span id="cb4-20"><a></a>fama_french_data[<span class="st">"Date"</span>] <span class="op">=</span> pd.to_datetime(</span>
<span id="cb4-21"><a></a>    fama_french_data[<span class="st">"Date"</span>], </span>
<span id="cb4-22"><a></a>    <span class="bu">format</span><span class="op">=</span><span class="st">"%Y-%m-</span><span class="sc">%d</span><span class="st">"</span>, </span>
<span id="cb4-23"><a></a>)</span>
<span id="cb4-24"><a></a>fama_french_data <span class="op">=</span> fama_french_data.set_index(<span class="st">"Date"</span>)</span>
<span id="cb4-25"><a></a></span>
<span id="cb4-26"><a></a><span class="co"># Merge returns and FF data, drop unnecessary data</span></span>
<span id="cb4-27"><a></a>merged_data <span class="op">=</span> pd.concat(</span>
<span id="cb4-28"><a></a>    [returns, fama_french_data], </span>
<span id="cb4-29"><a></a>    axis<span class="op">=</span><span class="dv">1</span></span>
<span id="cb4-30"><a></a>).dropna(axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="footer">

</div>
</div>
</section>
<section id="estimating-abnormal-returns" class="slide level4 scrollable">
<h4>Estimating Abnormal Returns</h4>
<p>Estimate outcome variable <span class="math inline">\(AR_{it}\)</span> using Fama-French 3 market model:</p>
<ul>
<li class="fragment">Separately regress returns of each <span class="math inline">\(i\)</span> on Fama-French factors over estimation window</li>
<li class="fragment">Obtained fitted values (<span class="math inline">\(\widehat{ER}_{it}\)</span>)</li>
<li class="fragment">Compute <span class="math inline">\(\widehat{AR}_{it}\)</span>} and store</li>
</ul>
<p>For contrast, also estimate mean model</p>
<<<<<<< HEAD
<div id="d6195e33" class="cell" data-execution_count="6">
=======
<div id="043d2cb6" class="cell" data-execution_count="6">
>>>>>>> block/panel
<details class="code-fold">
<summary>Expand for estimation of abnormal returns</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a></a><span class="co"># Create arrays to hold abnormal returns   </span></span>
<span id="cb5-2"><a></a>abnormal_returns_factor <span class="op">=</span> pd.DataFrame()</span>
<span id="cb5-3"><a></a>abnormal_returns_mean <span class="op">=</span> pd.DataFrame()    </span>
<span id="cb5-4"><a></a></span>
<span id="cb5-5"><a></a><span class="co"># Estimate abnormal returns for each </span></span>
<span id="cb5-6"><a></a><span class="cf">for</span> ticker <span class="kw">in</span> tickers:</span>
<span id="cb5-7"><a></a>    <span class="co"># Estimate the 3-factor abnormal returns</span></span>
<span id="cb5-8"><a></a>    X <span class="op">=</span> merged_data.loc[</span>
<span id="cb5-9"><a></a>        merged_data.index <span class="op">&lt;</span> event_date <span class="op">-</span> event_window, </span>
<span id="cb5-10"><a></a>        [<span class="st">"Mkt-RF"</span>, <span class="st">"SMB"</span>, <span class="st">"HML"</span>]</span>
<span id="cb5-11"><a></a>    ]   </span>
<span id="cb5-12"><a></a>    y <span class="op">=</span> merged_data.loc[</span>
<span id="cb5-13"><a></a>        merged_data.index <span class="op">&lt;</span> event_date <span class="op">-</span> event_window, </span>
<span id="cb5-14"><a></a>        ticker</span>
<span id="cb5-15"><a></a>    ] </span>
<span id="cb5-16"><a></a>    X <span class="op">=</span> sm.add_constant(X) </span>
<span id="cb5-17"><a></a>    model <span class="op">=</span> sm.OLS(y, X).fit()   </span>
<span id="cb5-18"><a></a></span>
<span id="cb5-19"><a></a>    <span class="co"># Compute expected returns during the window</span></span>
<span id="cb5-20"><a></a>    X_event <span class="op">=</span> (</span>
<span id="cb5-21"><a></a>        merged_data.loc[</span>
<span id="cb5-22"><a></a>            ((merged_data.index <span class="op">&gt;=</span> event_date <span class="op">-</span> event_window) <span class="op">&amp;</span> </span>
<span id="cb5-23"><a></a>            (merged_data.index <span class="op">&lt;=</span> event_date <span class="op">+</span> event_window)), </span>
<span id="cb5-24"><a></a>            [<span class="st">"Mkt-RF"</span>, <span class="st">"SMB"</span>, <span class="st">"HML"</span>]</span>
<span id="cb5-25"><a></a>        ]</span>
<span id="cb5-26"><a></a>    )</span>
<span id="cb5-27"><a></a>    X_event <span class="op">=</span> sm.add_constant(X_event)</span>
<span id="cb5-28"><a></a>    expected_returns <span class="op">=</span> model.predict(X_event)</span>
<span id="cb5-29"><a></a></span>
<span id="cb5-30"><a></a>    <span class="co"># Extract realized returns during the event</span></span>
<span id="cb5-31"><a></a>    event_data <span class="op">=</span> (</span>
<span id="cb5-32"><a></a>        merged_data.loc[</span>
<span id="cb5-33"><a></a>            ((merged_data.index <span class="op">&gt;=</span> event_date <span class="op">-</span> event_window) <span class="op">&amp;</span> </span>
<span id="cb5-34"><a></a>            (merged_data.index <span class="op">&lt;=</span> event_date <span class="op">+</span> event_window)), </span>
<span id="cb5-35"><a></a>            ticker</span>
<span id="cb5-36"><a></a>        ]</span>
<span id="cb5-37"><a></a>    )</span>
<span id="cb5-38"><a></a></span>
<span id="cb5-39"><a></a>    <span class="co"># Abnormal returns are residuals</span></span>
<span id="cb5-40"><a></a>    abnormal_returns_factor[ticker] <span class="op">=</span> event_data <span class="op">-</span> expected_returns</span>
<span id="cb5-41"><a></a>    abnormal_returns_mean[ticker] <span class="op">=</span> event_data <span class="op">-</span> y.mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="footer">

</div>
</section>
<section id="visualizing-average-abnormal-returns" class="slide level4">
<h4>Visualizing Average Abnormal Returns</h4>
<div id="cell-fig-causal-es-avg-abnormal-return" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div id="fig-causal-es-avg-abnormal-return" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-causal-es-avg-abnormal-return-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="event-studies_files/figure-revealjs/fig-causal-es-avg-abnormal-return-output-1.png" width="1093" height="491">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-causal-es-avg-abnormal-return-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Averages of abnormal returns with 95% pointwise confidence intervals
</figcaption>
</figure>
</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="looking-for-pretrends" class="slide level4">
<h4>Looking For Pretrends</h4>
<p><a href="#/fig-causal-es-avg-abnormal-return" class="quarto-xref">Figure&nbsp;1</a> suggests idea:</p>
<ul>
<li class="fragment">Cannot check no trends assumption for all periods (why?)</li>
<li class="fragment">But can check pretreatment periods for trends in means</li>
</ul>
<p><br></p>
<div class="fragment">
<p><a href="#/fig-causal-es-avg-abnormal-return" class="quarto-xref">Figure&nbsp;1</a>: zero mean for <span class="math inline">\(t\)</span> before March 8 — supports no trends</p>
</div>
</section>

<section id="estimation-and-inference" class="title-slide slide level3 center" data-background="#43464B" data-visibility="uncounted">
<h3>Estimation and Inference</h3>

</section>
<section id="preparing-data-for-event-study" class="slide level4">
<h4>Preparing Data for Event Study</h4>
<p>Now need to create <span class="math inline">\(\bX\)</span> and <span class="math inline">\(\by\)</span> matrices to apply event study OLS</p>
<p><br></p>
<div class="fragment">
<p>Key challenge: how do <span class="math inline">\(\bX\)</span> and <span class="math inline">\(\by\)</span> look like?</p>
<ul>
<li class="fragment">Regressors: indicators <span class="math inline">\(D_{it, \tau}\)</span> of every day after treatment start</li>
<li class="fragment">Express in tabular form: each row in <span class="math inline">\(\bX\)</span> contains data on one stock <span class="math inline">\(i\)</span> on one day <span class="math inline">\(t\)</span>, columns — <span class="math inline">\(\widehat{AR}_{it}\)</span> and <span class="math inline">\(D_{it, \tau}\)</span></li>
</ul>
</div>
</section>
<section id="generate-event-study-data" class="slide level4 scrollable">
<h4>Generate Event Study Data</h4>
<<<<<<< HEAD
<div id="13b07767" class="cell" data-execution_count="8">
=======
<div id="03c066e0" class="cell" data-execution_count="8">
>>>>>>> block/panel
<details class="code-fold">
<summary>Expand for construction of data matrices</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a></a><span class="co"># Create an array for day dummies</span></span>
<span id="cb6-2"><a></a>dummy_df <span class="op">=</span> (</span>
<span id="cb6-3"><a></a>    pd.get_dummies(</span>
<span id="cb6-4"><a></a>        np.maximum(</span>
<span id="cb6-5"><a></a>            (abnormal_returns_mean.index <span class="op">-</span> pd.to_datetime(event_date)).days<span class="op">+</span><span class="dv">1</span>, </span>
<span id="cb6-6"><a></a>            <span class="dv">0</span>,</span>
<span id="cb6-7"><a></a>        ), </span>
<span id="cb6-8"><a></a>        prefix<span class="op">=</span><span class="st">'day'</span>,</span>
<span id="cb6-9"><a></a>    )</span>
<span id="cb6-10"><a></a>)</span>
<span id="cb6-11"><a></a></span>
<span id="cb6-12"><a></a><span class="co"># Set the index again</span></span>
<span id="cb6-13"><a></a>dummy_df.index <span class="op">=</span> abnormal_returns_factor.index</span>
<span id="cb6-14"><a></a><span class="co"># Drop the column of days preceding the event</span></span>
<span id="cb6-15"><a></a>dummy_df <span class="op">=</span> dummy_df.drop(<span class="st">"day_0"</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb6-16"><a></a></span>
<span id="cb6-17"><a></a><span class="co"># Melt abnormal returns data</span></span>
<span id="cb6-18"><a></a>ar_factor_long <span class="op">=</span> abnormal_returns_factor.reset_index().melt(id_vars<span class="op">=</span><span class="st">"Date"</span>)</span>
<span id="cb6-19"><a></a>ar_factor_long.head()</span>
<span id="cb6-20"><a></a></span>
<span id="cb6-21"><a></a><span class="co"># Merge data</span></span>
<span id="cb6-22"><a></a>ar_factor_days <span class="op">=</span> pd.merge(</span>
<span id="cb6-23"><a></a>    ar_factor_long, </span>
<span id="cb6-24"><a></a>    dummy_df, </span>
<span id="cb6-25"><a></a>    how<span class="op">=</span><span class="st">'left'</span>, </span>
<span id="cb6-26"><a></a>    left_on<span class="op">=</span><span class="st">'Date'</span>, </span>
<span id="cb6-27"><a></a>    right_index<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb6-28"><a></a>)</span>
<span id="cb6-29"><a></a><span class="co"># Split into two</span></span>
<span id="cb6-30"><a></a>exog <span class="op">=</span> ar_factor_days.<span class="bu">filter</span>(regex<span class="op">=</span><span class="st">"day*"</span>, axis<span class="op">=</span><span class="dv">1</span>).astype(<span class="st">'float64'</span>)</span>
<span id="cb6-31"><a></a>exog <span class="op">=</span> sm.add_constant(exog)</span>
<span id="cb6-32"><a></a>endog <span class="op">=</span> ar_factor_days.loc[:, <span class="st">"value"</span>]</span>
<span id="cb6-33"><a></a></span>
<span id="cb6-34"><a></a><span class="co"># View</span></span>
<span id="cb6-35"><a></a>ar_factor_days.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe caption-top" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header" style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">value</th>
<th data-quarto-table-cell-role="th">day_1</th>
<th data-quarto-table-cell-role="th">day_2</th>
<th data-quarto-table-cell-role="th">day_3</th>
<th data-quarto-table-cell-role="th">day_6</th>
<th data-quarto-table-cell-role="th">day_7</th>
<th data-quarto-table-cell-role="th">day_8</th>
<th data-quarto-table-cell-role="th">day_9</th>
<th data-quarto-table-cell-role="th">day_10</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-02-27</td>
<td>ALLY</td>
<<<<<<< HEAD
<td>-2.330213</td>
=======
<td>-2.330199</td>
>>>>>>> block/panel
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-02-28</td>
<td>ALLY</td>
<<<<<<< HEAD
<td>2.108653</td>
=======
<td>2.108646</td>
>>>>>>> block/panel
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-03-01</td>
<td>ALLY</td>
<<<<<<< HEAD
<td>0.247474</td>
=======
<td>0.247480</td>
>>>>>>> block/panel
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-03-02</td>
<td>ALLY</td>
<<<<<<< HEAD
<td>-0.029389</td>
=======
<td>-0.029403</td>
>>>>>>> block/panel
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-03-03</td>
<td>ALLY</td>
<<<<<<< HEAD
<td>-1.057676</td>
=======
<td>-1.057684</td>
>>>>>>> block/panel
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="event-study-ols" class="slide level4 scrollable">
<h4>Event Study OLS</h4>
<p>Can now apply the event study estimator</p>
<<<<<<< HEAD
<div id="8a498517" class="cell" data-execution_count="9">
=======
<div id="07ed495c" class="cell" data-execution_count="9">
>>>>>>> block/panel
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a></a>factor_model <span class="op">=</span> sm.OLS(endog, exog).fit(cov_type<span class="op">=</span><span class="st">"HC0"</span>)</span>
<span id="cb7-2"><a></a><span class="bu">print</span>(factor_model.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            OLS Regression Results                            
==============================================================================
Dep. Variable:                  value   R-squared:                       0.253
Model:                            OLS   Adj. R-squared:                  0.247
Method:                 Least Squares   F-statistic:                     25.25
Date:                Fri, 23 May 2025   Prob (F-statistic):           1.50e-35
<<<<<<< HEAD
Time:                        16:07:49   Log-Likelihood:                -2430.0
=======
Time:                        15:56:44   Log-Likelihood:                -2430.0
>>>>>>> block/panel
No. Observations:                 975   AIC:                             4878.
Df Residuals:                     966   BIC:                             4922.
Df Model:                           8                                         
Covariance Type:                  HC0                                         
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
const         -0.3726      0.063     -5.946      0.000      -0.495      -0.250
day_1          0.1577      0.130      1.212      0.225      -0.097       0.413
day_2         -2.2013      0.255     -8.617      0.000      -2.702      -1.701
day_3         -0.3894      0.417     -0.933      0.351      -1.208       0.429
day_6         -5.3649      0.966     -5.551      0.000      -7.259      -3.471
day_7          1.7937      0.510      3.516      0.000       0.794       2.794
day_8          1.5680      0.420      3.734      0.000       0.745       2.391
day_9          1.6477      0.349      4.715      0.000       0.963       2.333
day_10        -1.5878      0.254     -6.240      0.000      -2.087      -1.089
==============================================================================
Omnibus:                      714.350   Durbin-Watson:                   1.914
<<<<<<< HEAD
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            46544.026
=======
Prob(Omnibus):                  0.000   Jarque-Bera (JB):            46544.104
>>>>>>> block/panel
Skew:                          -2.701   Prob(JB):                         0.00
Kurtosis:                      36.414   Cond. No.                         5.88
==============================================================================

Notes:
[1] Standard Errors are heteroscedasticity robust (HC0)</code></pre>
</div>
</div>
<div class="footer">

</div>
</section>
<section id="cumulative-effects" class="slide level4 scrollable">
<h4>Cumulative Effects</h4>
<p>There are (at least) two kinds parameters of interest:</p>
<ul>
<li class="fragment">Coefficients <span class="math inline">\(\beta_{\tau}\)</span></li>
<li class="fragment">Cumulative effects up to each given day</li>
</ul>
<p>Can compute cumulative effects and their variances as linear combinations of <span class="math inline">\(\beta_{\tau}\)</span></p>
</section>
<section id="computing-cumulative-effects" class="slide level4 scrollable">
<h4>Computing Cumulative Effects</h4>
<<<<<<< HEAD
<div id="fd38e4e1" class="cell" data-execution_count="10">
=======
<div id="e1f6af8c" class="cell" data-execution_count="10">
>>>>>>> block/panel
<details class="code-fold">
<summary>Expand to see computation of cumulative effects</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a></a><span class="co"># Extract coefs and SEs of daily indicators</span></span>
<span id="cb9-2"><a></a>dummy_coefficients <span class="op">=</span> factor_model.params.iloc[<span class="dv">1</span>:]  </span>
<span id="cb9-3"><a></a>dummy_cov_matrix <span class="op">=</span> factor_model.cov_params().iloc[<span class="dv">1</span>:, <span class="dv">1</span>:]  </span>
<span id="cb9-4"><a></a></span>
<span id="cb9-5"><a></a><span class="co"># Compute the cumulative effects</span></span>
<span id="cb9-6"><a></a>cumulative_effects <span class="op">=</span> dummy_coefficients.cumsum()</span>
<span id="cb9-7"><a></a></span>
<span id="cb9-8"><a></a><span class="co"># Compute the standard errors of the cumulative effects</span></span>
<span id="cb9-9"><a></a>cumulative_se <span class="op">=</span> np.zeros(<span class="bu">len</span>(cumulative_effects))</span>
<span id="cb9-10"><a></a><span class="cf">for</span> t <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(cumulative_effects) <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb9-11"><a></a>    <span class="co"># Create a vector of ones up to day t and zeros afterwards</span></span>
<span id="cb9-12"><a></a>    indicator_vector <span class="op">=</span> np.concatenate(</span>
<span id="cb9-13"><a></a>        [np.ones(t), np.zeros(<span class="bu">len</span>(cumulative_effects) <span class="op">-</span> t)]</span>
<span id="cb9-14"><a></a>    )</span>
<span id="cb9-15"><a></a></span>
<span id="cb9-16"><a></a>    <span class="co"># Compute the SE of the cumulative effect</span></span>
<span id="cb9-17"><a></a>    cumulative_se[t <span class="op">-</span> <span class="dv">1</span>] <span class="op">=</span> np.sqrt(</span>
<span id="cb9-18"><a></a>        indicator_vector <span class="op">@</span> dummy_cov_matrix <span class="op">@</span> indicator_vector</span>
<span id="cb9-19"><a></a>    )</span>
<span id="cb9-20"><a></a></span>
<span id="cb9-21"><a></a><span class="co"># Create a DataFrame to store the results</span></span>
<span id="cb9-22"><a></a>results <span class="op">=</span> pd.DataFrame(</span>
<span id="cb9-23"><a></a>    {</span>
<span id="cb9-24"><a></a>        <span class="st">"Day"</span>: factor_model.params.index[<span class="dv">1</span>:].<span class="bu">map</span>(<span class="kw">lambda</span> x: x[<span class="dv">4</span>:]),</span>
<span id="cb9-25"><a></a>        <span class="st">"Cumulative Effect"</span>: cumulative_effects,</span>
<span id="cb9-26"><a></a>        <span class="st">"SE"</span>: cumulative_se,</span>
<span id="cb9-27"><a></a>    }</span>
<span id="cb9-28"><a></a>)</span>
<span id="cb9-29"><a></a></span>
<span id="cb9-30"><a></a><span class="co"># Prepend day 0 as a reference</span></span>
<span id="cb9-31"><a></a>day0_df <span class="op">=</span> pd.DataFrame(</span>
<span id="cb9-32"><a></a>    {</span>
<span id="cb9-33"><a></a>        <span class="st">"Day"</span>: <span class="dv">0</span>,</span>
<span id="cb9-34"><a></a>        <span class="st">"Cumulative Effect"</span>: <span class="dv">0</span>,</span>
<span id="cb9-35"><a></a>        <span class="st">"SE"</span>: <span class="dv">0</span>,</span>
<span id="cb9-36"><a></a>    },</span>
<span id="cb9-37"><a></a>    index <span class="op">=</span> np.array([<span class="st">'day_0'</span>])</span>
<span id="cb9-38"><a></a>)</span>
<span id="cb9-39"><a></a>results <span class="op">=</span> pd.concat([day0_df, results])</span>
<span id="cb9-40"><a></a></span>
<span id="cb9-41"><a></a><span class="co"># Construct confidence intervals</span></span>
<span id="cb9-42"><a></a>results[<span class="st">"ci_upper"</span>] <span class="op">=</span> results[<span class="st">"Cumulative Effect"</span>] <span class="op">+</span> <span class="fl">1.96</span> <span class="op">*</span> results[<span class="st">"SE"</span>]</span>
<span id="cb9-43"><a></a>results[<span class="st">"ci_lower"</span>] <span class="op">=</span> results[<span class="st">"Cumulative Effect"</span>] <span class="op">-</span> <span class="fl">1.96</span> <span class="op">*</span> results[<span class="st">"SE"</span>]</span>
<span id="cb9-44"><a></a></span>
<span id="cb9-45"><a></a><span class="co"># Set index</span></span>
<span id="cb9-46"><a></a>results.index <span class="op">=</span> abnormal_returns_mean.index[<span class="dv">6</span>:]</span>
<span id="cb9-47"><a></a></span>
<span id="cb9-48"><a></a><span class="co"># Print the results</span></span>
<span id="cb9-49"><a></a><span class="bu">print</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           Day  Cumulative Effect        SE  ci_upper  ci_lower
Date                                                           
2023-03-07   0           0.000000  0.000000  0.000000  0.000000
<<<<<<< HEAD
2023-03-08   1           0.157669  0.130041  0.412549 -0.097211
2023-03-09   2          -2.043598  0.300032 -1.455536 -2.631661
2023-03-10   3          -2.433041  0.529120 -1.395967 -3.470116
2023-03-13   6          -7.797962  1.112404 -5.617651 -9.978274
2023-03-14   7          -6.004273  1.236561 -3.580614 -8.427932
2023-03-15   8          -4.436272  1.320873 -1.847360 -7.025183
2023-03-16   9          -2.788571  1.383458 -0.076993 -5.500149
2023-03-17  10          -4.376382  1.426062 -1.581300 -7.171464</code></pre>
=======
2023-03-08   1           0.157668  0.130041  0.412547 -0.097212
2023-03-09   2          -2.043599  0.300032 -1.455537 -2.631662
2023-03-10   3          -2.433041  0.529120 -1.395967 -3.470115
2023-03-13   6          -7.797964  1.112404 -5.617652 -9.978275
2023-03-14   7          -6.004274  1.236561 -3.580614 -8.427934
2023-03-15   8          -4.436272  1.320874 -1.847359 -7.025184
2023-03-16   9          -2.788573  1.383458 -0.076994 -5.500151
2023-03-17  10          -4.376382  1.426063 -1.581299 -7.171465</code></pre>
>>>>>>> block/panel
</div>
</div>
<div class="footer">

</div>
</section>
<section id="visualizing-cumulative-effects" class="slide level4">
<h4>Visualizing Cumulative Effects</h4>
<<<<<<< HEAD
<div id="e6c34f54" class="cell" data-execution_count="11">
=======
<div id="fee21923" class="cell" data-execution_count="11">
>>>>>>> block/panel
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="event-studies_files/figure-revealjs/cell-12-output-1.png" width="1110" height="457"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="testing-joint-zero-effect" class="slide level4">
<h4>Testing Joint Zero Effect</h4>
<p>Can also formally test our null that <span class="math inline">\(H_0: \beta_{\tau}=0\)</span> for all <span class="math inline">\(\tau\)</span></p>
<p><br></p>
<div class="fragment">
<p>Use Wald test:</p>
<<<<<<< HEAD
<div id="94188d20" class="cell" data-execution_count="12">
=======
<div id="e83bd43b" class="cell" data-execution_count="12">
>>>>>>> block/panel
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a></a>R <span class="op">=</span> np.concatenate( (np.zeros((<span class="dv">8</span>, <span class="dv">1</span>)), np.eye(<span class="bu">len</span>(factor_model.params)<span class="op">-</span><span class="dv">1</span>)), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb11-2"><a></a>wald_results <span class="op">=</span> factor_model.wald_test(R,  scalar<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-3"><a></a><span class="bu">print</span>(wald_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<<<<<<< HEAD
<pre><code>&lt;Wald test (chi2): statistic=201.9945143192429, p-value=2.4276652031914718e-39, df_denom=8&gt;</code></pre>
=======
<pre><code>&lt;Wald test (chi2): statistic=201.9941757331782, p-value=2.4280641369334108e-39, df_denom=8&gt;</code></pre>
>>>>>>> block/panel
</div>
</div>
</div>
</section>
<section id="empirical-conclusions" class="slide level4">
<h4>Empirical Conclusions</h4>
<p>So what is the final conclusion?</p>
<p><br></p>
<div class="rounded-box">
<p>Find that collapse of the SVB had significant negative effects on returns over the next 10 days</p>
</div>
</section>
</section>
<section>
<section id="recap-and-conclusions" class="title-slide slide level2 center" data-background="#00100F">
<h2>Recap and Conclusions</h2>

</section>
<section id="recap" class="slide level4">
<h4>Recap</h4>
<p>In this lecture we</p>
<ol type="1">
<li class="fragment">Introduced event studies — the simplest panel causal estimator</li>
<li class="fragment">Discussed causal properties under various assumptions of no trends</li>
<li class="fragment">Considered dynamic treatment effects</li>
<li class="fragment">Expressed event studies as regression</li>
<li class="fragment">Did a detailed study on the collapse of the SVB</li>
</ol>
</section>
<section id="next-questions" class="slide level4">
<h4>Next Questions</h4>
<ul>
<li class="fragment">What if the assumption of no trends is unreasonable?</li>
<li class="fragment">What if the treatment is not binary?</li>
</ul>
</section>
<section id="references-1" class="slide level4 allowframebreaks smaller scrollable" data-visibility="uncounted">
<h4>References</h4>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Fama2014TwoPillarsAsset" class="csl-entry" role="listitem">
Fama, Eugene F. 2014. <span>“Two <span>Pillars</span> of <span>Asset Pricing</span>.”</span> <em>American Economic Review</em> 104 (6): 1467–85. <a href="https://doi.org/10.1257/aer.104.6.1467">https://doi.org/10.1257/aer.104.6.1467</a>.
</div>
<div id="ref-Freyaldenhoven2021VisualizationIdentificationEstimation" class="csl-entry" role="listitem">
Freyaldenhoven, Simon, Christian Hansen, Jorge Pérez Pérez, and Jesse Shapiro. 2021. <span>“Visualization, <span>Identification</span>, and <span>Estimation</span> in the <span>Linear Panel Event-Study Design</span>.”</span> w29170. Cambridge, MA: National Bureau of Economic Research. <a href="https://doi.org/10.3386/w29170">https://doi.org/10.3386/w29170</a>.
</div>
<div id="ref-Huntington-Klein2025EffectIntroductionResearch" class="csl-entry" role="listitem">
Huntington-Klein, Nick. 2025. <em>The <span>Effect</span>: <span>An Introduction</span> to <span>Research Design</span> and <span>Causality</span></em>. S.l.: <span>Chapman and Hall/CRC</span>.
</div>
<div id="ref-MacKinlay1997EventStudiesEconomics" class="csl-entry" role="listitem">
MacKinlay, A. Craig. 1997. <span>“Event <span>Studies</span> in <span>Economics</span> and <span>Finance</span>.”</span> <em>Journal of Economic Literature</em> 35 (1): 13–39.
</div>
<div id="ref-Miller2023IntroductoryGuideEvent" class="csl-entry" role="listitem">
Miller, Douglas L. 2023. <span>“An <span>Introductory Guide</span> to <span>Event Study Models</span>.”</span> <em>Journal of Economic Perspectives</em> 37 (2): 203–30. <a href="https://doi.org/10.1257/jep.37.2.203">https://doi.org/10.1257/jep.37.2.203</a>.
</div>
</div>


<div class="reveal-header">
<div class="header-logo" data-footer-logo-link="https://vladislav-morozov.github.io/econometrics-2/">
<img data-src="">
</div>
<div class="sc-title">
<p> </p>
</div>
<div class="header-text">
<p> </p>
</div>
<div class="sb-title">
<p> </p>
</div>
</div>
</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../themes/favicon.ico" class="slide-logo"></p>
<div class="footer footer-default">
<p>Panel Data: Event Studies</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'convex',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1150,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/vladislav-morozov\.github\.io\/econometrics-2\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>